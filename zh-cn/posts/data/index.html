<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>一份经济微观数据库的数据清洗快速指南 - 滑翔闪&#39;S BLOG</title><meta name="Description" content="This is my cool site"><meta property="og:title" content="一份经济微观数据库的数据清洗快速指南" />
<meta property="og:description" content="本文将介绍国内主要的社会调查数据库，并且附上常用的 stata 数据清洗和描述统计代码。也记录了很多我遇到过的数据清洗问题，例如 excel 相关的处理" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.huaxiangshan.com/zh-cn/posts/data/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-03-14T18:09:26+08:00" />
<meta property="article:modified_time" content="2023-03-14T18:09:26+08:00" /><meta property="og:site_name" content="My cool site" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="一份经济微观数据库的数据清洗快速指南"/>
<meta name="twitter:description" content="本文将介绍国内主要的社会调查数据库，并且附上常用的 stata 数据清洗和描述统计代码。也记录了很多我遇到过的数据清洗问题，例如 excel 相关的处理"/>
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://blog.huaxiangshan.com/zh-cn/posts/data/" /><link rel="prev" href="https://blog.huaxiangshan.com/zh-cn/posts/soul/" /><link rel="next" href="https://blog.huaxiangshan.com/zh-cn/posts/moviedoor/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.1.1/css/all.min.css"></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "一份经济微观数据库的数据清洗快速指南",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/blog.huaxiangshan.com\/zh-cn\/posts\/data\/"
        },"genre": "posts","keywords": "Stata","wordcount":  8018 ,
        "url": "https:\/\/blog.huaxiangshan.com\/zh-cn\/posts\/data\/","datePublished": "2023-03-14T18:09:26+08:00","dateModified": "2023-03-14T18:09:26+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "滑翔闪"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper">

<script>
window.MathJax = {
  tex: {
    inlineMath: [["$", "$"], ["\\(", "\\)"]],
    displayMath: [["$$","$$"], ["[[", "]]"]]
  },
  svg: { fontCache: "global" }
};

const mathjaxCDNs = [
  "https://cdn.bootcdn.net/ajax/libs/mathjax/3.2.2/es5/tex-chtml.js",
  "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js",
  "https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-chtml.js"
];

function loadMathJax(index=0){
  if(index >= mathjaxCDNs.length){
    console.error("所有 MathJax CDN 加载失败");
    return;
  }
  const script = document.createElement("script");
  script.src = mathjaxCDNs[index];
  script.async = true;
  script.onload = () => console.log("MathJax 加载成功:", mathjaxCDNs[index]);
  script.onerror = () => {
    console.warn("MathJax CDN 加载失败，尝试下一个:", mathjaxCDNs[index]);
    loadMathJax(index+1);
  };
  document.head.appendChild(script);
}


const polyfillCDNs = [
  "https://cdn.bootcdn.net/ajax/libs/polyfill/3.110.0/polyfill.min.js",
  "https://polyfill.io/v3/polyfill.min.js?features=es6"
];
const polyfillScript = document.createElement("script");
polyfillScript.src = polyfillCDNs[0]; 
document.head.appendChild(polyfillScript);


loadMathJax();
</script>












<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sakana 小组件集成</title>
  <style>
     
    #sakana-widget-container {
      position: fixed;
      bottom: 10px;
      left: 10px;
      width: 268px;
      height: 268px;
    }
    #sakana-widget {
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <div id="sakana-widget-container">
    <div id="sakana-widget"></div>
  </div>

  <script>
    function initSakanaWidget() {
      new SakanaWidget({
        size: 300,
        autoFit: true,
        character: 'chisato',
        controls: true,
        rod: true,
        draggable: true,
        stroke: { color: '#b4b4b4', width: 10 },
        threshold: 0.1,
        rotate: 0,
        title: false
      }).mount('#sakana-widget');

      
      checkScreenWidth();
      window.addEventListener('resize', checkScreenWidth);
    }

    function checkScreenWidth() {
      var screenWidth = window.innerWidth;
      var container = document.getElementById('sakana-widget-container');
      if (screenWidth <= 960) {
        container.style.display = 'none';
      } else {
        container.style.display = 'block';
      }
    }
  </script>

  
  <script 
    async
    onload="initSakanaWidget()"
    src="https://cdn.jsdelivr.net/npm/sakana-widget@2.2.2/lib/sakana.min.js">
  </script>
</body>
</html>




<script type="text/javascript" color="0,174,255" opacity='0.7' zIndex="-2" count="200" src="https://www.liuzehe.top/upload/bkjs/bj.js"></script><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/zh-cn/" title="滑翔闪&#39;S BLOG"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/images/%E7%9F%9B%E7%9B%BE.png"
        data-srcset="/images/%E7%9F%9B%E7%9B%BE.png, /images/%E7%9F%9B%E7%9B%BE.png 1.5x, /images/%E7%9F%9B%E7%9B%BE.png 2x"
        data-sizes="auto"
        alt="/images/%E7%9F%9B%E7%9B%BE.png"
        title="/images/%E7%9F%9B%E7%9B%BE.png" /><span id="id-1" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/zh-cn/posts/" title="书中自有黄金屋"><i class='fa fa-solid fa-book'></i> 文章 </a><a class="menu-item" href="/zh-cn/tags/" title="定义文章，不定义世界"><i class='fa fa-tag'></i> 标签 </a><a class="menu-item" href="/zh-cn/categories/" title="分类是种视角"><i class='fa fa-archive'></i> 分类 </a><a class="menu-item" href="/zh-cn/friends/" title="有朋自远方来"><i class='fa fa-user-group'></i> 友链  </a><a class="menu-item" href="/zh-cn/about/" title="人穷其一生寻找自己"> <i class='fa fa-address-card'></i> 关于 </a><a class="menu-item" href="https://www.travellings.cn/go.html" title="漫长的列车驶向未来" rel="noopener noreffer" target="_blank"><i class='fa fa-train-subway'></i> 开往  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="吾将上下而求索" id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a><a href="javascript:void(0);" class="menu-item language" title="选择语言">
                    <i class="fa fa-globe" aria-hidden="true"></i>                      
                    <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/zh-cn/posts/data/" selected>简体中文</option></select>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/zh-cn/" title="滑翔闪&#39;S BLOG"><img
        class="lazyload logo"
        src="/svg/loading.min.svg"
        data-src="/images/%E7%9F%9B%E7%9B%BE.png"
        data-srcset="/images/%E7%9F%9B%E7%9B%BE.png, /images/%E7%9F%9B%E7%9B%BE.png 1.5x, /images/%E7%9F%9B%E7%9B%BE.png 2x"
        data-sizes="auto"
        alt="/images/%E7%9F%9B%E7%9B%BE.png"
        title="/images/%E7%9F%9B%E7%9B%BE.png" /><span id="id-2" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="吾将上下而求索" id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/zh-cn/posts/" title="书中自有黄金屋"><i class='fa fa-solid fa-book'></i>文章</a><a class="menu-item" href="/zh-cn/tags/" title="定义文章，不定义世界"><i class='fa fa-tag'></i>标签</a><a class="menu-item" href="/zh-cn/categories/" title="分类是种视角"><i class='fa fa-archive'></i>分类</a><a class="menu-item" href="/zh-cn/friends/" title="有朋自远方来"><i class='fa fa-user-group'></i>友链 </a><a class="menu-item" href="/zh-cn/about/" title="人穷其一生寻找自己"> <i class='fa fa-address-card'></i>关于</a><a class="menu-item" href="https://www.travellings.cn/go.html" title="漫长的列车驶向未来" rel="noopener noreffer" target="_blank"><i class='fa fa-train-subway'></i>开往 </a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">
                    <i class="fa fa-globe fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/zh-cn/posts/data/" selected>简体中文</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">一份经济微观数据库的数据清洗快速指南</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/hzp2333/hzp2333.github.io" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>滑翔闪</a></span>&nbsp;<span class="post-category">收录于 <a href="/zh-cn/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>软件工具</a>&nbsp;<a href="/zh-cn/categories/%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%B9%A0/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>经济学习</a></span></div>

            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2023-03-14">2023-03-14</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 8018 字
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 17 分钟&nbsp;
    

    
        

        
        
            <span id="busuanzi_container_value_page_pv"><i class="far fa-eye fa-fw"></i>
                
                <span id="busuanzi_value_page_pv"></span>&nbsp;次阅读</span>
        
    


</div>

        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113145919.webp"
        data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113145919.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113145919.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113145919.webp 2x"
        data-sizes="auto"
        alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113145919.webp"
        title="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113145919.webp" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#一流行的国内数据库">一、流行的国内数据库：</a>
      <ul>
        <li><a href="#大型综合数据库">大型、综合数据库</a></li>
      </ul>
    </li>
    <li><a href="#二清洗思路和意义">二、清洗思路和意义</a></li>
    <li><a href="#三stata-操作">三、STATA 操作</a>
      <ul>
        <li><a href="#推荐教程">推荐教程</a></li>
        <li><a href="#我个人遇到过的一些情况">我个人遇到过的一些情况</a></li>
        <li><a href="#1中文数据库导入转码">1、中文数据库导入转码</a></li>
        <li><a href="#2数据库的匹配">2、数据库的匹配</a></li>
        <li><a href="#3变量的快速选择">3、变量的快速选择</a></li>
        <li><a href="#4插值法">4、插值法</a></li>
        <li><a href="#5字符转数字">5、<strong>字符转数字：</strong></a></li>
        <li><a href="#6日期转码5"><strong>6、日期转码</strong></a></li>
        <li><a href="#7删除和条件语句">7、删除和条件语句</a></li>
        <li><a href="#8去尾处理">8、去尾处理</a></li>
        <li><a href="#9分组处理">9、分组处理</a></li>
        <li><a href="#10排序处理">10、排序处理</a></li>
        <li><a href="#11删去重复行">11、删去重复行</a></li>
        <li><a href="#12截取字符">12、截取字符</a></li>
        <li><a href="#12一些描述统计图">12、一些描述统计图</a>
          <ul>
            <li>
              <ul>
                <li><a href="#一些可视化代码网站">一些可视化代码网站</a></li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="#13绘图风格">13、绘图风格</a></li>
        <li><a href="#更多">更多：</a></li>
      </ul>
    </li>
    <li><a href="#四stata-转-excel"><strong>四、STATA 转 EXCEL</strong></a></li>
    <li><a href="#五excel">五、EXCEL</a>
      <ul>
        <li><a href="#0常见乱码">0、常见乱码</a></li>
        <li><a href="#1vlookup-函数">1、VLOOKUP 函数</a></li>
        <li><a href="#2数据透视表">2、数据透视表</a></li>
        <li><a href="#3字符拆卸">3、字符拆卸</a></li>
        <li><a href="#4删改字符">4、删改字符</a></li>
        <li><a href="#5数据库合并"><strong>5、数据库合并</strong></a></li>
      </ul>
    </li>
    <li><a href="#六结束">六、结束</a></li>
    <li><a href="#参考">参考</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-1765803069193.webp" title="微观数据库例子" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-1765803069193.webp" data-sub-html="<h2> </h2><p>微观数据库例子</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-1765803069193.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-1765803069193.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-1765803069193.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-1765803069193.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-1765803069193.webp" />
    </a><figcaption class="image-caption">微观数据库例子</figcaption>
    </figure></p>
<p><strong>前人之述备矣，我只是浅踩了几个坑。</strong><br>
主要软件： <code>stata</code>、<code>EXCEL</code>、<code>SAS</code>。</p>
<h2 id="一流行的国内数据库">一、流行的国内数据库：</h2>
<blockquote>
<p>大部分微观数据库文件以 DTA、SAS、EXCEL 文件为主。按主体（社区问卷、家庭问卷、社会文件）和主题（背景信息、健康、经济&hellip;）分开。每一年的截面数据也是分开的, 所以需要自己处理成面板数据。</p>
</blockquote>
<p>用<strong>学生邮箱</strong>在官网申请即可。</p>
<p><strong>申请体验：CFPS\CHARLS\CHIP\CGSS 的申请体验非常好。就是网站偶尔会崩掉打不开，申请上就建议马上下载全部数据。</strong></p>
<h3 id="大型综合数据库">大型、综合数据库</h3>
<p>1、CFPS：<a href="http://www.isss.pku.edu.cn/cfps/" target="_blank" rel="noopener noreffer ">www.isss.pku.edu.cn/cfps/</a></p>
<p><strong>中国教育追踪调查：</strong> CFPS 由北京大学中国社会科学调查中心（ISSS）实施。跟踪收集个体、家庭、社区三个层次的数据，反映中国社会、经济、人口、教育和健康的变迁，为学术研究和公共政策分析提供数据基础。</p>
<p>2、CMDS：<a href="https://www.chinaldrk.org.cn/wjw/#/application/index" target="_blank" rel="noopener noreffer ">数据申请 (chinaldrk.org.cn)</a></p>
<p><strong>中国流动人口动态监测数据：</strong> 国家卫生健康委自 2009 年起一年一度大规模全国性流动人口抽样调查数据，内容涉及流动人口及家庭成员基本信息、流动范围和趋向、就业和社会保障、收支和居住、基本公共卫生服务、婚育和计划生育服务管理、子女流动和教育、心理文化等。</p>
<p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112730736.webp" title="CMDS已经停止更新" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112730736.webp" data-sub-html="<h2> </h2><p>CMDS已经停止更新</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112730736.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112730736.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112730736.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112730736.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112730736.webp" />
    </a><figcaption class="image-caption">CMDS已经停止更新</figcaption>
    </figure></p>
<p>3、CHARLS: 中国健康与养老追踪调查 <a href="http://charls.pku.edu.cn/" target="_blank" rel="noopener noreffer "> (pku.edu.cn)</a></p>
<p><strong>中国健康与养老追踪调查:</strong> 中国健康与养老追踪调查。北京大学国家发展研究院主持、中国社会科学调查中心执行的一项大型跨学科调查项目代表中国 45 岁及以上中老年人家庭和个人的高质量微观数据。</p>
<p>4、CSS：中国社会状况综合调查（<a href="http://css.cssn.cn/css_sy/" target="_blank" rel="noopener noreffer ">http://css.cssn.cn/css_sy/</a>）</p>
<p><strong>中国社会状况综合调查：</strong> 中国社会科学院社会学研究所于 2005 年发起的一项全国范围内的大型连续性抽样调查项目，目的是通过对全国公众的劳动就业、家庭及社会生活、社会态度等方面的长期纵贯调查，来获取转型时期中国社会变迁的数据资料，从而为社会科学研究和政府决策提供翔实而科学的基础信息。目前，2006、2008、2022、2013、2015、2017、2019、2021 年，共八期 CSS 数据，已向全社会开放。</p>
<p>5、CHIP：中国家庭收入调查（<a href="http://www.ciidbnu.org/" target="_blank" rel="noopener noreffer ">http://www.ciidbnu.org/</a>）</p>
<p><strong>中国家庭收入调查:</strong> 北京师范大学收入分配研究院发动<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>。该项目旨在收集家庭调查数据，以用于分析改革开放以后的中国诸如收入、不平等以及贫困趋势的可能有益的经验分析。</p>
<p>6、CGSS：中国家庭收入调查（<a href="http://www.cnsda.org/" target="_blank" rel="noopener noreffer ">http://www.cnsda.org/</a>）</p>
<p>中国综合社会调查（Chinese General Social Survey，CGSS），是中国第一个全国性、综合性、连续性的大型社会调查项目。目的是通过定期、系统地收集中国人与中国社会各个方面的数据，总结社会变迁的长期趋势，探讨具有重大理论和现实意义的社会议题，推动国内社会科学研究的开放性与共享性，为政府决策与国际比较研究提供数据资料。</p>
<p>7、<strong>中国统计年鉴：</strong> 城市数据、区域数据&hellip;</p>
<p>这个网上整理好的面板数据满天飞。</p>
<p>其他：例如还有中国家庭金融调查 CHFS（<a href="https://chfser.swufe.edu.cn/datasso/Home/Login?4813085540248732983" target="_blank" rel="noopener noreffer ">https://chfser.swufe.edu.cn/datasso/Home/Login?4813085540248732983</a>）。</p>
<p><strong>我们还可以用一些小的专题数据库来辅助主要数据库进行分析。</strong></p>
<p>例如北大普惠金融数据库：<a href="https://idf.pku.edu.cn/yjcg/zsbg/513800.htm" target="_blank" rel="noopener noreffer ">北京大学数字普惠金融指数</a>、创新创业指数、政府治理指数&hellip;</p>
<blockquote>
<p>例如现在关于城市数字经济的测量，<br>
大部分人采用的是赵涛（2020）<sup id="fnref:2"><a href="#fn:2" class="footnote-ref" role="doc-noteref">2</a></sup>的方法，<br>
将城市统计年鉴+普惠金融的数据作为指标。<br>
随着“数字经济”的火热，不知多少人第一篇计量是从数字经济、城市韧性开始的，，，，，</p>
</blockquote>
<p>还有一些付费网站（学校可能会有买的<sup id="fnref:3"><a href="#fn:3" class="footnote-ref" role="doc-noteref">3</a></sup>）</p>
<p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112757079.webp" title="经济学还有以上付费数据库，可以看自己学校有没有购买" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112757079.webp" data-sub-html="<h2> </h2><p>经济学还有以上付费数据库，可以看自己学校有没有购买</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112757079.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112757079.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112757079.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112757079.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112757079.webp" />
    </a><figcaption class="image-caption">经济学还有以上付费数据库，可以看自己学校有没有购买</figcaption>
    </figure></p>
<p>经济学还有以上付费数据库，可以看自己学校有没有购买</p>
<p>金融数据库不太了解，锐思看起来挺好用</p>
<p><strong>经济方面：中经网、EPS 网页直接整理面板，非常好用。</strong></p>
<blockquote>
<p>互联网上的数据库<strong>灰色产业</strong>：<br>
网络上大量数据库有免费账号售卖，<br>
其实就是学生把自己的学校账号权限集合成了数据库访问网站。</p>
</blockquote>
<h2 id="二清洗思路和意义">二、清洗思路和意义</h2>
<p>清洗数据具体做什么？基本上就是完成以下工作。</p>
<ul>
<li><strong>进行表格匹配</strong>：匹配合并不同的数据库表格，目的是整合筛选指标，分为横向和纵向匹配。</li>
<li><strong>去除不良数据：</strong> 去除不良数据。例如空白数据、极端数据、不需要的数据&hellip;&hellip;&hellip;</li>
<li><strong>填补空白数据：</strong> 填充数据。处理面板数据和时间序列，我们往往通过线性插值的方法补充中间或边缘的缺失值。</li>
<li><strong>数据聚合：</strong> 通过特定方法数据建立指标，例如主成分、熵权法、层次分析&hellip;&hellip;</li>
</ul>
<p>最重要的是掌握<strong>工！作！流！程！</strong></p>
<blockquote>
<p>一般在跑回归时都会发生“变量不够”、“遗失变量”等惨剧，我们随时可能需要返工更新变量，检查失误环节，因此保留完整的流程文件夹是很有必要的。</p>
</blockquote>
<p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112821041.webp" title="流程" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112821041.webp" data-sub-html="<h2> </h2><p>流程</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112821041.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112821041.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112821041.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112821041.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112821041.webp" />
    </a><figcaption class="image-caption">流程</figcaption>
    </figure></p>
<p><strong>经验之谈!!!!!</strong> 原始数据保留一个文件夹、表格匹配完成后保留一个文件夹、清洗过程再保留一个文件夹！</p>
<blockquote>
<p>把代码写成——可以丝滑的一口气从数据清洗运行到结果输出就是流水线的最高境界！</p>
</blockquote>
<p>一是能展现我们各个工作步骤，便于检查工作，二是方便随时从中间步骤“返工”。</p>
<h2 id="三stata-操作">三、STATA 操作</h2>
<h3 id="推荐教程">推荐教程</h3>
<p>教程视频，看一个足矣（两小时）：</p>
<blockquote>
<p>简介里提到了这位 up 个人 githubgithub 主页（录屏和 do 文件）</p>
</blockquote>
<div class="bilibili"><iframe src="//player.bilibili.com/player.html?bvid=BV1fK411o7qV&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe></div>

<h3 id="我个人遇到过的一些情况">我个人遇到过的一些情况</h3>
<h3 id="1中文数据库导入转码">1、中文数据库导入转码</h3>
<p>中文乱码，要么更新 statastata 版本、要么使用代码</p>
<blockquote>
<p>两个方法其实是一个作用。</p>
</blockquote>
<p><strong>方法一：处理</strong> cmdscmds <strong>时遇到了</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">cd</span><span class="w"> </span><span class="s2">&#34;C:\Users\Desktop\转码&#34;</span><span class="w">    </span><span class="o">//</span><span class="w"> </span><span class="err">新建一个转码文件夹，然后修改自己的路径</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">unicode</span><span class="w"> </span><span class="k">encoding</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">gb18030</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">unicode</span><span class="w"> </span><span class="k">analyze</span><span class="w"> </span><span class="err">流动人口数据个人问卷</span><span class="mi">2018</span><span class="p">.</span><span class="n">dta</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="err">文件名根据自己的数据进行调整</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">unicode</span><span class="w"> </span><span class="k">translate</span><span class="w"> </span><span class="err">流动人口数据个人问卷</span><span class="mi">2018</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">invalid</span><span class="w">   </span><span class="o">//</span><span class="w"> </span><span class="err">文件名根据自己的数据进行调整</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>方法二：处理</strong> charlscharls <strong>的</strong>PSU. Dta<sup id="fnref:4"><a href="#fn:4" class="footnote-ref" role="doc-noteref">4</a></sup><strong>时遇到省份、城市乱码</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">cd</span><span class="w"> </span><span class="s2">&#34;D:\household_and_community_questionnaire_data&#34;</span><span class="w">  </span><span class="o">//</span><span class="err">设置文件储存地点</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">unicode</span><span class="w"> </span><span class="k">analyze</span><span class="w"> </span><span class="n">PSU</span><span class="p">.</span><span class="n">dta</span><span class="w"> </span><span class="o">//</span><span class="n">PSU</span><span class="p">.</span><span class="n">dta换成要编译的文件</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">unicode</span><span class="w"> </span><span class="k">encoding</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="s2">&#34;GB18030&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">unicode</span><span class="w"> </span><span class="n">retranslate</span><span class="w"> </span><span class="n">psu</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">transutf8</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="2数据库的匹配">2、数据库的匹配</h3>
<p>无非就是围绕样本的 ID、yearID、year 进行整合</p>
<p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112842109.webp" title="img" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112842109.webp" data-sub-html="<h2> </h2><p>img</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112842109.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112842109.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112842109.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112842109.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112842109.webp" />
    </a><figcaption class="image-caption">img</figcaption>
    </figure></p>
<p>Stata 的匹配代码——<strong>以下只写简洁解释</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">//</span><span class="n">master_data</span><span class="p">.</span><span class="n">dta就是基底数据库</span><span class="err">，</span><span class="n">using_data</span><span class="p">.</span><span class="n">dta就是我们要匹配上去的数据库</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="n">m</span><span class="p">:</span><span class="n">n</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="err">意思就是第一个数据的</span><span class="n">m个id可以对应n个第二个数据库的样本id</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="err">简而言之，</span><span class="n">m</span><span class="p">:</span><span class="n">n就是多对一</span><span class="err">，</span><span class="n">n</span><span class="p">:</span><span class="n">n就是1对1</span><span class="err">，</span><span class="n">m</span><span class="p">:</span><span class="n">m就是多对多</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="w"> </span><span class="err">所以我们也可以添加多个匹配条件，例如</span><span class="n">merge</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">year</span><span class="w"> </span><span class="k">treat</span><span class="w"> </span><span class="p">......</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">************</span><span class="err">横向匹配</span><span class="mi">1</span><span class="o">**************************</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="s2">&#34;master_data.dta&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">merge</span><span class="w"> </span><span class="n">m</span><span class="p">:</span><span class="n">n</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="s2">&#34;using_data.dta&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">drop</span><span class="w"> </span><span class="n">_merge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="s2">&#34;new_data.dta&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">************</span><span class="err">横向匹配</span><span class="mi">2</span><span class="o">**************************</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="s2">&#34;master_data.dta&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">joinby</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="s2">&#34;using_data.dta&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">************</span><span class="err">纵向匹配</span><span class="o">**************************</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="s2">&#34;data1.dta&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">append</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="s2">&#34;data2.dta&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="s2">&#34;new_data.dta&#34;</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><div class="details admonition tip">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>关于横向匹配<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p><code>merge</code> 适合匹配方或者被匹配方的标识是<strong>唯一</strong>的。</p>
<p>一对多匹配时，比如主数据标识是唯一的，被匹配数据虽然重复，但每个重复标识行分别在不同的变量空缺，可以使用 <code>merge</code> 的追加匹配子命令，每次匹配只更新空缺部分。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">use &#34;master_data.dta&#34;
</span></span><span class="line"><span class="cl">merge 1:m id using &#34;using_data.dta&#34;, update nogen force
</span></span></code></pre></td></tr></table>
</div>
</div><p>多对多的匹配，需要使用 <code>joinby</code>。</p>
<p>详细情况可参考: <a href="https://mp.weixin.qq.com/s/gJbMNzmVQ8C1za5rMdOjPQ" target="_blank" rel="noopener noreffer ">多对多合并-merge-joinby</a></p>
</div>
        </div>
    </div>
<h3 id="3变量的快速选择">3、变量的快速选择</h3>
<blockquote>
<p>Shift\ctrl 这类快捷键基本是软件设计通用的，用多了就能融会贯通到其他软件里。</p>
</blockquote>
<p>Stata 右上角有个变量窗口。右键可以得到全选和其他选择，也可以充当检索框。</p>
<p>同时选择就是 ctrl+多次点击。如果我们需要一口气同时选择断断续续的十几个变量，请积极使用。</p>
<p>截取中间一段，就是点击一个变量，然后同时 shift+单击一个变量，就是截取中间一段</p>
<blockquote>
<p>例如，可以先右键，全选，然后 ctrl+点击去掉不要的变量；<br>
例如，我们要查看特定数据完整度，就在处理时先命名为“x_i”，然后筛选命名为 x 的进行全选。</p>
</blockquote>
<p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112901832.webp" title="在python拥有这种窗口前我不会认为跑回归这事它优于stata" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112901832.webp" data-sub-html="<h2> </h2><p>在python拥有这种窗口前我不会认为跑回归这事它优于stata</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112901832.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112901832.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112901832.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523112901832.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523112901832.webp" />
    </a><figcaption class="image-caption">在python拥有这种窗口前我不会认为跑回归这事它优于stata</figcaption>
    </figure></p>
<h3 id="4插值法">4、插值法</h3>
<p>线性插值，面板数据，</p>
<p>老规矩，面板先<strong>标记个体编号和年份编号</strong>，</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">xtset</span><span class="w"> </span><span class="n">id</span><span class="w">  </span><span class="k">year</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">by</span><span class="w"> </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">ipolate</span><span class="w"> </span><span class="n">YY</span><span class="w"> </span><span class="k">year</span><span class="p">,</span><span class="n">gen</span><span class="p">(</span><span class="n">YYY</span><span class="p">)</span><span class="w">  </span><span class="o">//</span><span class="err">内插，中间空缺值，填完后命名为新变量</span><span class="n">YYY</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">by</span><span class="w"> </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">ipolate</span><span class="w"> </span><span class="n">XX</span><span class="w"> </span><span class="k">year</span><span class="p">,</span><span class="n">gen</span><span class="p">(</span><span class="n">XXX</span><span class="p">)</span><span class="w"> </span><span class="n">epolate</span><span class="w"> </span><span class="o">//</span><span class="err">外插，边缘空缺值，填完后命名为新变量</span><span class="n">XXX</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>我的建议是，能用 <code>forvalues</code> 就用 <code>forvalues</code><sup id="fnref:5"><a href="#fn:5" class="footnote-ref" role="doc-noteref">5</a></sup>，还要活用变量宏。</p>
<blockquote>
<p>当知道了基础的循环命令+变量嵌套+判断筛选命令，编写代码就可以天马行空了。</p>
</blockquote>
<p>例如下面这个批量插值循环如下：</p>
<p>$var_i  \stackrel{内插}{\longrightarrow}varx_i\stackrel{外插}{\longrightarrow}varn_i\stackrel{替换}{\longrightarrow}var_i\stackrel{删除}{\longrightarrow}varx_i $</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">global</span><span class="w"> </span><span class="n">var</span><span class="w"> </span><span class="n">var0</span><span class="w"> </span><span class="n">var1</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="n">var3</span><span class="w"> </span><span class="n">genshin</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="err">打包所有需要插值的变量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">foreach</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">$</span><span class="n">var</span><span class="w"> </span><span class="err">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">by</span><span class="w"> </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">ipolate</span><span class="w"> </span><span class="o">`</span><span class="n">i</span><span class="s1">&#39; year,gen(varx`i&#39;</span><span class="p">)</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">by</span><span class="w"> </span><span class="n">id</span><span class="p">:</span><span class="w"> </span><span class="n">ipolate</span><span class="w"> </span><span class="n">varx</span><span class="o">`</span><span class="n">i</span><span class="s1">&#39; year,gen(varn`i&#39;</span><span class="p">)</span><span class="w"> </span><span class="n">epolate</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="o">`</span><span class="n">i</span><span class="s1">&#39; =  varn`i&#39;</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">drop</span><span class="w">  </span><span class="n">varx</span><span class="o">`</span><span class="n">i</span><span class="s1">&#39;   varn`i&#39;</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="err">}</span><span class="w"> 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>同理，清洗问卷数据的不良数据也是一样的循环</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="k">global</span><span class="w"> </span><span class="n">var</span><span class="w">  </span><span class="n">var0</span><span class="w"> </span><span class="n">var1</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="n">var3</span><span class="w"> </span><span class="n">genshin</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="err">打包所有需要插值的变量</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">foreach</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="err">$</span><span class="n">var</span><span class="w"> </span><span class="err">{</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">drop</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">`</span><span class="n">i</span><span class="s1">&#39; == -88
</span></span></span><span class="line"><span class="cl"><span class="s1">drop if `i&#39;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">-</span><span class="mi">99</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">drop</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="o">`</span><span class="n">i</span><span class="s1">&#39; ==.
</span></span></span><span class="line"><span class="cl"><span class="s1">drop if `i&#39;</span><span class="w"> </span><span class="o">&lt;=</span><span class="mi">0</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">  </span><span class="err">}</span><span class="w"> 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>互联网还流传着一个“一键显著”的清洗。思想就是暴力排列组合控制变量，后面甚至开始筛选样本了。我的看法是，可以看看选控制变量的代码，但别随意动样本，经济学计量发展的一个核心灵魂就是“随机实验”，干预样本选择容易破坏数据随机性，基本上就是造假了。</p>
<p>（不过仅就代码思维来说，这确实体现了当你掌握了筛选，判断，循环的命令后，你可以干的事已经非常多了，同样是清洗，如何进行算法组合就是考验人的地方。）</p>
<h3 id="5字符转数字">5、<strong>字符转数字：</strong></h3>
<p>例如 charls 数据库的 communityID 就是以字符形式存在的。</p>
<blockquote>
<p>虽然中文作为变量名也可以匹配，但当长度太长时 stata 似乎不能处理，<br>
使用命令<strong>强制</strong>转化成数字：</p>
</blockquote>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">destring</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="n">householdID</span><span class="w"> </span><span class="n">communityID</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="k">force</span><span class="w"> </span><span class="o">*</span><span class="err">加上</span><span class="k">force</span><span class="err">，正义执行！</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="6日期转码5"><strong>6、日期转码</strong><sup id="fnref:6"><a href="#fn:6" class="footnote-ref" role="doc-noteref">6</a></sup></h3>
<p>有些时候我们下载的日期代码不能被 stata 识别，此时要用到 date 函数。</p>
<blockquote>
<p>例如一次课堂作业，我想展现中国的自信！<br>
给老师一点小小的中国震撼。（这就是中国. Jpg）<br>
用的是<a href="https://data.iimedia.cn/page-category.jsp?type=basic" target="_blank" rel="noopener noreffer ">艾媒咨询</a>的华为、苹果笔记本淘宝数据。<br>
ps: 当时顺便找了中日俄美的出口贸易数据，数据来源<a href="https://data.worldbank.org.cn/indicator/NY.GDP.MKTP.CD?view=map" target="_blank" rel="noopener noreffer ">世界银行</a>。</p>
</blockquote>
<p>但尴尬的是，里面 Excel 加载的日期格式为 Y-M-D， stata 不能直接识别</p>
<p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113029310.webp" title="2是华为，1是苹果，销量是nurmber，日期是year那列" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113029310.webp" data-sub-html="<h2> </h2><p>2是华为，1是苹果，销量是nurmber，日期是year那列</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113029310.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113029310.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113029310.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113029310.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113029310.webp" />
    </a><figcaption class="image-caption">2是华为，1是苹果，销量是nurmber，日期是year那列</figcaption>
    </figure></p>
<p>使用代码：(我在经管之家找的代码）</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="n">excel</span><span class="w"> </span><span class="s2">&#34;E:\桌面\笔记本.xlsx&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">sheet</span><span class="p">(</span><span class="s2">&#34;Sheet1&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">firstrow</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">generate</span><span class="w"> </span><span class="nb">date</span><span class="o">=</span><span class="nb">date</span><span class="p">(</span><span class="k">year</span><span class="p">,</span><span class="s2">&#34;YMD&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">//</span><span class="err">识别日期</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">format</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="o">%</span><span class="n">td</span><span class="w"> </span><span class="o">//</span><span class="err">进一步转化</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113049973.webp" title="绿色是苹果，金色是华为。可以看到date被处理后变成特殊的日期形式，而且可以直接用stata画散点图。原始图不见了，就简单重画了，请勿在意这鬼畜的配色" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113049973.webp" data-sub-html="<h2> </h2><p>绿色是苹果，金色是华为。可以看到date被处理后变成特殊的日期形式，而且可以直接用stata画散点图。原始图不见了，就简单重画了，请勿在意这鬼畜的配色</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113049973.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113049973.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113049973.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113049973.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113049973.webp" />
    </a><figcaption class="image-caption">绿色是苹果，金色是华为。可以看到date被处理后变成特殊的日期形式，而且可以直接用stata画散点图。原始图不见了，就简单重画了，请勿在意这鬼畜的配色</figcaption>
    </figure></p>
<p>绿色是苹果，金色是华为。可以看到 date 被处理后变成特殊的日期形式，而且可以直接用 stata 画散点图。原始图不见了，就简单重画了，请勿在意这鬼畜的配色</p>
<p>再举例一份关于空气污染的数据。Excel 中 date 一栏为“<strong>短格式日期</strong>”</p>
<p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113109413.webp" title="img" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113109413.webp" data-sub-html="<h2> </h2><p>img</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113109413.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113109413.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113109413.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113109413.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113109413.webp" />
    </a><figcaption class="image-caption">img</figcaption>
    </figure></p>
<p>导入 stata 使用 date 函数，进行画图</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ada" data-lang="ada"><span class="line"><span class="cl"><span class="n">generate</span> <span class="n">year</span><span class="o">=</span><span class="n">date</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="s">&#34;YMD&#34;</span><span class="p">)</span> <span class="o">//</span><span class="n">识别日期</span>
</span></span><span class="line"><span class="cl"><span class="n">format</span> <span class="n">year</span> <span class="err">%</span><span class="n">td</span> <span class="o">//</span><span class="n">进一步转化</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113125783.webp" title="根据这个图很容易发现季节上的周期性" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113125783.webp" data-sub-html="<h2> </h2><p>根据这个图很容易发现季节上的周期性</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113125783.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113125783.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113125783.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113125783.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113125783.webp" />
    </a><figcaption class="image-caption">根据这个图很容易发现季节上的周期性</figcaption>
    </figure></p>
<p>通过描述统计画图可以看出空气污染在季节上有周期性。于是我们想把月份单独切片出来进行季节编号。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-abap" data-lang="abap"><span class="line"><span class="cl"><span class="nv">generate</span> <span class="nv">month</span> <span class="o">=</span> <span class="nv">month</span><span class="p">(</span><span class="nv">year</span><span class="p">)</span> <span class="p">//</span><span class="nv">对已经处理后的year日期进行月份切片</span>
</span></span><span class="line"><span class="cl"><span class="p">//</span><span class="nv">更详细解释可以参考</span><span class="err">：</span><span class="nv">https</span><span class="p">://</span><span class="nv">stata</span><span class="o">-</span><span class="nv">club</span><span class="p">.</span><span class="nv">github</span><span class="p">.</span><span class="nv">io</span><span class="p">/</span><span class="nv">stata_article</span><span class="p">/</span><span class="mi">2017</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mi">29</span><span class="p">.</span><span class="nv">html</span>
</span></span><span class="line"><span class="cl"><span class="nv">gen</span> <span class="nv">spring</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="nv">month</span> <span class="o">==</span> <span class="mi">3</span> <span class="p">|</span><span class="s1">month == 4 </span><span class="p">|</span> <span class="nv">month</span> <span class="o">==</span> <span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="k">replace </span><span class="nv">spring</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="nv">spring</span> <span class="err">!</span><span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="nv">gen</span> <span class="nv">summer</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="nv">month</span> <span class="o">==</span> <span class="mi">6</span> <span class="p">|</span><span class="s1">month == 7 </span><span class="p">|</span> <span class="nv">month</span> <span class="o">==</span> <span class="mi">8</span>
</span></span><span class="line"><span class="cl"><span class="k">replace </span><span class="nv">summer</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="nv">summer</span> <span class="err">!</span><span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="nv">gen</span> <span class="nv">fall</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="nv">month</span> <span class="o">==</span> <span class="mi">9</span> <span class="p">|</span><span class="s1">month == 10 </span><span class="p">|</span> <span class="nv">month</span> <span class="o">==</span> <span class="mi">11</span>
</span></span><span class="line"><span class="cl"><span class="k">replace </span><span class="nv">fall</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="nv">fall</span> <span class="err">!</span><span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl"><span class="nv">gen</span> <span class="nv">winter</span> <span class="o">=</span> <span class="mi">1</span> <span class="k">if</span> <span class="nv">month</span> <span class="o">==</span> <span class="mi">12</span> <span class="p">|</span><span class="s1">month == 1 </span><span class="p">|</span> <span class="nv">month</span> <span class="o">==</span> <span class="mi">2</span>
</span></span><span class="line"><span class="cl"><span class="k">replace </span><span class="nv">winter</span> <span class="o">=</span> <span class="mi">0</span> <span class="k">if</span> <span class="nv">winter</span> <span class="err">!</span><span class="o">=</span> <span class="mi">1</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113145919.webp" title="根据季节分类进行拟合会发现线性趋势更加明显。我们发现温度和污染具有相关性所以前一个图呈现周期性，我们也可以提出假设温度越低，暖气、热炕、煤炭的使用导致空气污染增多" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113145919.webp" data-sub-html="<h2> </h2><p>根据季节分类进行拟合会发现线性趋势更加明显。我们发现温度和污染具有相关性所以前一个图呈现周期性，我们也可以提出假设温度越低，暖气、热炕、煤炭的使用导致空气污染增多</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113145919.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113145919.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113145919.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113145919.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113145919.webp" />
    </a><figcaption class="image-caption">根据季节分类进行拟合会发现线性趋势更加明显。我们发现温度和污染具有相关性所以前一个图呈现周期性，我们也可以提出假设温度越低，暖气、热炕、煤炭的使用导致空气污染增多</figcaption>
    </figure></p>
<h3 id="7删除和条件语句">7、删除和条件语句</h3>
<p>Stata 删除特定列的命令是 drop 命令。</p>
<p>建议直接&quot;h drop&quot;查看说明。</p>
<p><strong>活用 if 条件、forvalues 循环命令就是考验算法素养的时候！</strong></p>
<ul>
<li>你要处理怎样的数据，你的目的是什么？</li>
<li>目的可以怎样分解，可以分解成怎样的流程，怎样的 if 条件筛选更快，怎样的 forvalues 循环可以尽快地简化你的清洗步骤？</li>
<li>活用 stata 的 do 文件，考虑代码的复用性，这样写代码后，之后能不能循环重复利用，例如只换变量名词。</li>
</ul>
<h3 id="8去尾处理">8、去尾处理</h3>
<p>使用 <code>winsor2</code> 命令，是<a href="https://www.lianxh.cn/details/562.html" target="_blank" rel="noopener noreffer ">连玉君老师</a>写的命令。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">histogram</span> <span class="k">var</span><span class="p">,</span>  <span class="n">ylabel</span><span class="p">(,</span> <span class="n">angle</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="n">xtitle</span><span class="p">(</span><span class="s2">&#34;横坐标名字&#34;</span><span class="p">)</span> <span class="n">name</span><span class="p">(</span><span class="err">图片文件名</span><span class="p">,</span> <span class="n">replace</span><span class="p">)</span> \\<span class="err">频数图绘制下分布看看</span>
</span></span><span class="line"><span class="cl"><span class="n">winsor2</span> <span class="k">var</span><span class="p">,</span> <span class="n">cut</span><span class="p">(</span><span class="mi">0</span> <span class="mf">97.5</span><span class="p">)</span> <span class="n">trim</span> <span class="n">replace</span>  \\<span class="err">去掉变量</span><span class="n">var右侧2</span><span class="o">.</span><span class="mi">5</span><span class="o">%</span><span class="err">的极端数据</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="9分组处理">9、分组处理</h3>
<p>按照变量“国界”分组，计算每组对应变量的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ada" data-lang="ada"><span class="line"><span class="cl"><span class="n">bysort</span> <span class="n">国界</span><span class="p">:</span> <span class="n">egen</span> <span class="n">乡村振兴边境</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">乡村振兴</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">bysort</span> <span class="n">国界</span><span class="p">:</span> <span class="n">egen</span> <span class="n">产业兴旺边境</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">产业兴旺</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">bysort</span> <span class="n">国界</span><span class="p">:</span> <span class="n">egen</span> <span class="n">生态宜居边境</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">生态宜居</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">bysort</span> <span class="n">国界</span><span class="p">:</span> <span class="n">egen</span> <span class="n">治理有效边境</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">治理有效</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">bysort</span> <span class="n">国界</span><span class="p">:</span> <span class="n">egen</span> <span class="n">乡风文明边境</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">乡风文明</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">bysort</span> <span class="n">国界</span><span class="p">:</span> <span class="n">egen</span> <span class="n">生活富裕边境</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="n">生活富裕</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="10排序处理">10、排序处理</h3>
<p>想让数据根据一些标准从小到大排列，使用 sort 命令</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ada" data-lang="ada"><span class="line"><span class="cl"><span class="n">sort</span> <span class="n">year</span> <span class="n">age</span> <span class="n">income</span> <span class="o">//</span><span class="n">首先按照年份排序</span><span class="err">，</span><span class="n">相同年份的一列中按照年龄排序</span><span class="err">，</span><span class="n">同年同年龄就按收入排序</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="11删去重复行">11、删去重复行</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">duplicates</span> <span class="n">drop</span> <span class="k">var</span><span class="err">，</span><span class="n">force</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="12截取字符">12、截取字符</h3>
<p>中文字符一个字符就是三个位置</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">gen</span> <span class="n">x</span><span class="o">=</span><span class="n">substr</span><span class="p">(</span><span class="k">var</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="12一些描述统计图">12、一些描述统计图</h3>
<h5 id="一些可视化代码网站">一些可视化代码网站</h5>
<ul>
<li><a href="https://surveydesign.com.au/stata/graphs.html" target="_blank" rel="noopener noreffer ">SDAS Stata Graph Gallery</a></li>
<li><a href="https://asjadnaqvi.github.io/stata-portfolio/tags/portfolio/" target="_blank" rel="noopener noreffer ">StataViz by Asjad Naqvi</a></li>
<li><a href="https://worldbank.github.io/stata-visual-library/" target="_blank" rel="noopener noreffer ">Stata Visual Library</a></li>
</ul>
<p>个人推荐自定义换行符, 这样画图命令更加优雅：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">#delimit;</span>
</span></span><span class="line"><span class="cl"><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">gen</span> <span class="n">di</span> <span class="o">=</span> <span class="n">year</span> <span class="o">-</span> <span class="n">branch_reform</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="n">eventdd</span> <span class="n">entre_activation</span> <span class="n">i</span><span class="o">.</span><span class="n">year</span> <span class="n">lnagdp</span> <span class="n">indust_stru</span> <span class="n">finance</span> <span class="n">ainternet</span> <span class="n">market</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"> <span class="n">timevar</span><span class="p">(</span><span class="n">di</span><span class="p">)</span> <span class="o">//</span><span class="err">定义时间虚拟变量</span>
</span></span><span class="line"><span class="cl"> <span class="n">ci</span><span class="p">(</span><span class="n">rcap</span><span class="p">)</span> <span class="o">//</span><span class="err">误差条</span>  
</span></span><span class="line"><span class="cl"> <span class="n">noline</span> <span class="o">//</span><span class="err">不绘制</span><span class="o">-</span><span class="mi">1</span><span class="err">期的置信区间条</span>
</span></span><span class="line"><span class="cl"> <span class="n">method</span><span class="p">(</span><span class="n">fe</span><span class="p">)</span> <span class="o">//</span><span class="err">如果要添加自相关聚类——</span><span class="n">method</span><span class="p">(</span><span class="n">fe</span><span class="p">,</span><span class="n">cluster</span><span class="p">(</span><span class="err">自相关聚类</span><span class="p">))</span>
</span></span><span class="line"><span class="cl"> <span class="n">baseline</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">//</span><span class="err">基础年份为</span><span class="mi">0</span>
</span></span><span class="line"><span class="cl"> <span class="n">level</span><span class="p">(</span><span class="mi">95</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"> <span class="n">graph_op</span><span class="p">(</span><span class="n">ytitle</span><span class="p">(</span><span class="s2">&#34;coefficients&#34;</span><span class="p">)</span> <span class="n">xtitle</span><span class="p">(</span><span class="s2">&#34;Time&#34;</span><span class="p">)</span>  <span class="n">xlabel</span><span class="p">(</span><span class="o">-</span><span class="mi">10</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="mi">14</span><span class="p">));</span> <span class="o">//</span> <span class="err">取消自定义换行</span>
</span></span><span class="line"><span class="cl"><span class="c1">#delimit cr</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>图片合并</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">graph combine &#34;a.gph&#34; &#34;b.gph&#34;, col(1) xcommon ycommon
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>气泡图</strong></p>
<p>在 <a href="https://zhuanlan.zhihu.com/p/581227252" target="_blank" rel="noopener noreffer ">Stata绘制高级气泡图</a>看到的，很有意思</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">sysuse</span><span class="w"> </span><span class="n">auto</span><span class="p">,</span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">set</span><span class="w"> </span><span class="n">scheme</span><span class="w"> </span><span class="n">white_tableau</span><span class="w"> </span><span class="o">//</span><span class="err">设置主题，小伙伴可以根据自己的喜好自行设置</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">twoway</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="n">scatter</span><span class="w"> </span><span class="n">mpg</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="p">[</span><span class="n">w</span><span class="o">=</span><span class="w"> </span><span class="n">price</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">4220</span><span class="p">,</span><span class="w"> </span><span class="n">msymbol</span><span class="p">(</span><span class="n">Oh</span><span class="p">)</span><span class="w"> </span><span class="n">mcolor</span><span class="p">(</span><span class="s2">&#34;220 235 136&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">msize</span><span class="p">(</span><span class="n">small</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="n">scatter</span><span class="w"> </span><span class="n">mpg</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="p">[</span><span class="n">w</span><span class="o">=</span><span class="w"> </span><span class="n">price</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">4220</span><span class="p">,</span><span class="w"> </span><span class="n">msymbol</span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="n">mcolor</span><span class="p">(</span><span class="s2">&#34;220 235 136&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">msize</span><span class="p">(</span><span class="n">small</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="n">scatter</span><span class="w"> </span><span class="n">mpg</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="p">[</span><span class="n">w</span><span class="o">=</span><span class="w"> </span><span class="n">price</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">price</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">4220</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">6332</span><span class="p">),</span><span class="w"> </span><span class="n">msymbol</span><span class="p">(</span><span class="n">Oh</span><span class="p">)</span><span class="w"> </span><span class="n">mcolor</span><span class="p">(</span><span class="s2">&#34;180 232 172&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">msize</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="n">scatter</span><span class="w"> </span><span class="n">mpg</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="p">[</span><span class="n">w</span><span class="o">=</span><span class="w"> </span><span class="n">price</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">price</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">4220</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">6332</span><span class="p">),</span><span class="w"> </span><span class="n">msymbol</span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="n">mcolor</span><span class="p">(</span><span class="s2">&#34;180 232 172&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">msize</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="n">scatter</span><span class="w"> </span><span class="n">mpg</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="p">[</span><span class="n">w</span><span class="o">=</span><span class="w"> </span><span class="n">price</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6332</span><span class="p">,</span><span class="w"> </span><span class="n">msymbol</span><span class="p">(</span><span class="n">Oh</span><span class="p">)</span><span class="w"> </span><span class="n">mcolor</span><span class="p">(</span><span class="s2">&#34;152 210 196&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">msize</span><span class="p">(</span><span class="k">large</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="p">(</span><span class="n">scatter</span><span class="w"> </span><span class="n">mpg</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="p">[</span><span class="n">w</span><span class="o">=</span><span class="w"> </span><span class="n">price</span><span class="p">]</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">foreign</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">price</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">6332</span><span class="p">,</span><span class="w"> </span><span class="n">msymbol</span><span class="p">(</span><span class="n">o</span><span class="p">)</span><span class="w"> </span><span class="n">mcolor</span><span class="p">(</span><span class="s2">&#34;152 210 196&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">msize</span><span class="p">(</span><span class="k">large</span><span class="p">)),</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">xlabel</span><span class="p">(</span><span class="mi">2000</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span><span class="w"> </span><span class="mi">5000</span><span class="p">)</span><span class="w"> </span><span class="n">ylabel</span><span class="p">(</span><span class="mi">10</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="mi">50</span><span class="p">)</span><span class="w"> </span><span class="n">legend</span><span class="p">(</span><span class="n">label</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="s2">&#34; &#34;</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34; &#34;</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34; &#34;</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34; &#34;</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34; &#34;</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34; &#34;</span><span class="p">)</span><span class="w"> </span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">row</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">ring</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="k">position</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">bmargin</span><span class="p">(</span><span class="n">medlarge</span><span class="p">))</span><span class="w"> </span><span class="nb">text</span><span class="p">(</span><span class="mi">45</span><span class="p">.</span><span class="mi">3</span><span class="w"> </span><span class="mi">3800</span><span class="w"> </span><span class="s2">&#34;Foreign&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">7</span><span class="p">))</span><span class="w"> </span><span class="nb">text</span><span class="p">(</span><span class="mi">39</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="mi">3800</span><span class="w"> </span><span class="s2">&#34;Domestic&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">7</span><span class="p">))</span><span class="w"> </span><span class="nb">text</span><span class="p">(</span><span class="mi">49</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="mi">4100</span><span class="w"> </span><span class="s2">&#34;Low Price&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">7</span><span class="p">))</span><span class="w"> </span><span class="nb">text</span><span class="p">(</span><span class="mi">49</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="mi">4450</span><span class="w"> </span><span class="s2">&#34;Med Price&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">7</span><span class="p">))</span><span class="w"> </span><span class="nb">text</span><span class="p">(</span><span class="mi">49</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="mi">4800</span><span class="w"> </span><span class="s2">&#34;High Price&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">7</span><span class="p">))</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="n">mycolor中为RGB颜色编码</span><span class="err">，可以自己根据喜好定义；</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="n">xlabel和ylabel分别设置横纵轴的标签</span><span class="err">；</span><span class="n">legend设置图例</span><span class="err">；</span><span class="n">text设置文字的具体位置</span><span class="err">，具体格式</span><span class="nb">text</span><span class="err">（</span><span class="n">y坐标</span><span class="w"> </span><span class="n">x坐标</span><span class="w"> </span><span class="s2">&#34;标签文本&#34;</span><span class="err">）</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113214106.webp" title="气泡散点图" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113214106.webp" data-sub-html="<h2> </h2><p>气泡散点图</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113214106.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113214106.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113214106.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113214106.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113214106.webp" />
    </a><figcaption class="image-caption">气泡散点图</figcaption>
    </figure>
<strong>折线图</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">twoway</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">6</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">7</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">9</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">10</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">11</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="nb">date</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="o">==</span><span class="mi">12</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="p">,</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">legend</span><span class="p">(</span><span class="k">order</span><span class="p">(</span><span class="mi">1</span><span class="w"> </span><span class="s2">&#34;group1&#34;</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;group2&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;group3&#34;</span><span class="w">  </span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;group4&#34;</span><span class="w">  </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;group5&#34;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;group6&#34;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="s2">&#34;group7&#34;</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="s2">&#34;group8&#34;</span><span class="w"> </span><span class="mi">9</span><span class="w"> </span><span class="s2">&#34;group9&#34;</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="s2">&#34;group10&#34;</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="s2">&#34;group11&#34;</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="s2">&#34;group12&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Line plot&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">))</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>饼图</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">graph</span><span class="w"> </span><span class="n">pie</span><span class="w"> </span><span class="n">var2</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">group</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">over</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="n">plabel</span><span class="p">(</span><span class="n">_all</span><span class="w"> </span><span class="n">percent</span><span class="p">,</span><span class="w"> </span><span class="n">format</span><span class="p">(</span><span class="o">%</span><span class="mi">9</span><span class="p">.</span><span class="mi">2</span><span class="n">f</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">line</span><span class="p">(</span><span class="n">lcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="n">lwidth</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> 	</span><span class="o">///</span><span class="w">                  
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="o">//</span><span class="w"> </span><span class="n">outline</span><span class="w"> </span><span class="n">colors</span><span class="w"> </span><span class="n">have</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">manually</span><span class="w"> </span><span class="n">added</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Pie plot&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">))</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>箱线图</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">graph</span> <span class="n">box</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="k">var</span><span class="o">*</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="p">,</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">title</span><span class="p">(</span><span class="s2">&#34;Box plot&#34;</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>柱状图</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">histogram</span> <span class="n">var4</span><span class="p">,</span> <span class="n">percent</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="n">title</span><span class="p">(</span><span class="s2">&#34;Histogram&#34;</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>加上核密度线</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">histogram</span> <span class="n">var4</span><span class="p">,</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">    <span class="n">ylabel</span><span class="p">(,</span> <span class="n">angle</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">    <span class="n">xtitle</span><span class="p">(</span><span class="s2">&#34;税收&#34;</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">    <span class="n">kdensity</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>竖向条形图</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">graph</span> <span class="n">bar</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="k">var</span><span class="o">*</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="p">,</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">blabel</span><span class="p">(</span><span class="n">bar</span><span class="p">,</span> <span class="n">format</span><span class="p">(</span><span class="o">%</span><span class="mf">9.2</span><span class="n">f</span><span class="p">))</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">title</span><span class="p">(</span><span class="s2">&#34;Bar graph&#34;</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>横向条形图</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">graph</span> <span class="n">hbar</span> <span class="p">(</span><span class="n">mean</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="k">var</span><span class="o">*</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="n">group</span> <span class="o">&lt;=</span> <span class="mi">6</span><span class="p">,</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">over</span><span class="p">(</span><span class="n">group</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">percentages</span> <span class="n">stack</span>	<span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">legend</span><span class="p">(</span><span class="n">order</span><span class="p">(</span><span class="mi">1</span> <span class="s2">&#34;Var 1&#34;</span> <span class="mi">2</span> <span class="s2">&#34;Var 2&#34;</span> <span class="mi">3</span> <span class="s2">&#34;Var 3&#34;</span>  <span class="mi">4</span> <span class="s2">&#34;Var 4&#34;</span>  <span class="mi">5</span> <span class="s2">&#34;Var 5&#34;</span> <span class="mi">6</span> <span class="s2">&#34;Var 6&#34;</span><span class="p">))</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">title</span><span class="p">(</span><span class="s2">&#34;Bar graph&#34;</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>置信区间</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">twoway</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="n">lpolyci</span> <span class="n">var1</span> <span class="n">var9</span><span class="p">,</span> <span class="n">fcolor</span><span class="p">(</span><span class="o">%</span><span class="mi">80</span><span class="p">))</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="n">lpolyci</span> <span class="n">var2</span> <span class="n">var9</span><span class="p">,</span> <span class="n">fcolor</span><span class="p">(</span><span class="o">%</span><span class="mi">80</span><span class="p">))</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="n">lpolyci</span> <span class="n">var3</span> <span class="n">var9</span><span class="p">,</span> <span class="n">fcolor</span><span class="p">(</span><span class="o">%</span><span class="mi">80</span><span class="p">))</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="p">,</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">title</span><span class="p">(</span><span class="s2">&#34;Confidence Interval&#34;</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>范围区间</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">twoway</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="n">rcapsym</span> <span class="n">var2</span> <span class="n">var3</span> <span class="n">date</span> <span class="k">if</span> <span class="n">group</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span> <span class="n">sort</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="n">rcapsym</span> <span class="n">var2</span> <span class="n">var3</span> <span class="n">date</span> <span class="k">if</span> <span class="n">group</span><span class="o">==</span><span class="mi">2</span><span class="p">,</span> <span class="n">sort</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="p">,</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">title</span><span class="p">(</span><span class="s2">&#34;Range plots&#34;</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>面积图</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">twoway ///
</span></span><span class="line"><span class="cl">	(area den1d den1x, fcolor(%50)) ///
</span></span><span class="line"><span class="cl">	(area gen2d gen2x, fcolor(%50)) ///
</span></span><span class="line"><span class="cl">	(area gen3d gen3x, fcolor(%50)), ///
</span></span><span class="line"><span class="cl">			title(&#34;Density plots&#34;) ///
</span></span><span class="line"><span class="cl">			note(&#34;The Stata Guide&#34;, size(vsmall))
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>标签散点</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">twoway</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="n">scatter</span> <span class="n">var2</span> <span class="n">var1</span><span class="p">,</span> <span class="n">mlabel</span><span class="p">(</span><span class="n">group</span><span class="p">))</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">date</span><span class="o">==</span><span class="mi">22320</span><span class="o">///</span><span class="p">,</span><span class="o">///</span><span class="n">title</span><span class="p">(</span><span class="s2">&#34;Confidence Interval&#34;</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>分组散点图</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-gdscript3" data-lang="gdscript3"><span class="line"><span class="cl"><span class="n">twoway</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">	<span class="p">(</span><span class="n">scatter</span> <span class="n">var2</span> <span class="n">var1</span><span class="p">)</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="k">if</span> <span class="n">group</span> <span class="o">&lt;=</span> <span class="mi">12</span><span class="p">,</span> <span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">by</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="n">yrescale</span> <span class="n">xrescale</span><span class="p">)</span>	<span class="o">///</span>
</span></span><span class="line"><span class="cl">		<span class="n">by</span><span class="p">(,</span> <span class="n">title</span><span class="p">(</span><span class="s2">&#34;By graphs&#34;</span><span class="p">)</span> <span class="n">note</span><span class="p">(</span><span class="s2">&#34;The Stata Guide&#34;</span><span class="p">,</span> <span class="n">size</span><span class="p">(</span><span class="n">vsmall</span><span class="p">)))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>雷达图</strong></p>
<p><code>radar</code> 和 <code>spyder</code> 都可以，个人觉得蛛网好看很多。</p>
<p>雷达图可以<a href="https://bbs.pinggu.org/thread-4128289-1-1.html" target="_blank" rel="noopener noreffer ">参考</a>。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">palettes</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">colrspace</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">schemepack</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">更新</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ado</span><span class="w"> </span><span class="k">update</span><span class="p">,</span><span class="w"> </span><span class="k">update</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">input</span><span class="w"> </span><span class="n">strL</span><span class="w"> </span><span class="err">属性</span><span class="w"> </span><span class="n">A</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="k">C</span><span class="w"> </span><span class="n">D</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">F</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">力量</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">敏捷</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">智力</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">感知</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">魅力</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">幸运</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">4</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">end</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">compress</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">spider</span><span class="w"> </span><span class="n">A</span><span class="o">-</span><span class="n">F</span><span class="p">,</span><span class="w"> </span><span class="n">over</span><span class="p">(</span><span class="err">属性</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">sysuse</span><span class="w"> </span><span class="n">auto</span><span class="p">,</span><span class="n">clear</span><span class="w">   
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">radar</span><span class="w"> </span><span class="n">make</span><span class="w"> </span><span class="n">weight</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">foreign</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113529088.webp" title="蛛网图" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113529088.webp" data-sub-html="<h2> </h2><p>蛛网图</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113529088.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113529088.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113529088.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113529088.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113529088.webp" />
    </a><figcaption class="image-caption">蛛网图</figcaption>
    </figure></p>
<h3 id="13绘图风格">13、绘图风格</h3>
<p>参见<a href="https://www.lianxh.cn/news/e76a8a7e3c6c4.html" target="_blank" rel="noopener noreffer ">最强绘画包</a></p>
<p>个人最推荐 <code>Rainbow</code> 风格和 <code>gg_tableau</code>。</p>
<p>gg 系列模仿的是 R 语言的默认风格，Rainbow 色彩很明亮，够特立独行，我也喜欢封闭的 box 纯白背景。不过要注意 <code>Rainbow</code> 风格由于背景默认是网格图，不太方便自定义参考线。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">schemepack</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">scheme</span><span class="w"> </span><span class="n">white_tableau</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">scheme</span><span class="w"> </span><span class="n">black_tableau</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">scheme</span><span class="w"> </span><span class="n">gg_tableau</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">scheme</span><span class="w"> </span><span class="n">white_tableau</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">scheme</span><span class="w"> </span><span class="n">Rainbow</span><span class="w">  
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="err">汇总风格如下——</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Series</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Tableau</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">white_tableau</span><span class="w"> </span><span class="n">black_tableau</span><span class="w"> </span><span class="n">gg_tableau</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Cividis</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">white_cividis</span><span class="w"> </span><span class="n">black_cividis</span><span class="w"> </span><span class="n">gg_cividis</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Viridis</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">white_viridis</span><span class="w"> </span><span class="n">black_viridis</span><span class="w"> </span><span class="n">gg_viridis</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Hue</span><span class="w">     </span><span class="o">-</span><span class="w"> </span><span class="n">white_hue</span><span class="w">     </span><span class="n">black_hue</span><span class="w">     </span><span class="n">gg_hue</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">BrBg</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">white_brbg</span><span class="w">    </span><span class="n">black_brbg</span><span class="w">    </span><span class="n">gg_brbg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">PiYg</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">white_piyg</span><span class="w">    </span><span class="n">black_piyg</span><span class="w">    </span><span class="n">gg_piyg</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">pTol</span><span class="w">    </span><span class="o">-</span><span class="w"> </span><span class="n">white_ptol</span><span class="w">    </span><span class="n">black_ptol</span><span class="w">    </span><span class="n">gg_ptol</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Jet</span><span class="w">     </span><span class="o">-</span><span class="w"> </span><span class="n">white_jet</span><span class="w">     </span><span class="n">black_jet</span><span class="w">     </span><span class="n">gg_jet</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">w3d</span><span class="w">     </span><span class="o">-</span><span class="w"> </span><span class="n">white_w3d</span><span class="w">     </span><span class="n">black_w3d</span><span class="w">     </span><span class="n">gg_w3d</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">Standalones</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Rainbow</span><span class="w">            </span><span class="o">-</span><span class="w"> </span><span class="n">rainbow</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Neon</span><span class="w">               </span><span class="o">-</span><span class="w"> </span><span class="n">neon</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">Taylor</span><span class="w"> </span><span class="n">Swift</span><span class="s1">&#39;s Red - swift_red  
</span></span></span><span class="line"><span class="cl"><span class="s1">    Ukraine            - ukraine
</span></span></span><span class="line"><span class="cl"><span class="s1">Colorblind-friendly schemes:
</span></span></span><span class="line"><span class="cl"><span class="s1">    Tab1               - tab1
</span></span></span><span class="line"><span class="cl"><span class="s1">    Tab2               - tab2
</span></span></span><span class="line"><span class="cl"><span class="s1">    Tab3               - tab3  
</span></span></span><span class="line"><span class="cl"><span class="s1">    cblind1            - cblind1   
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="更多">更多：</h3>
<p><a href="https://mp.weixin.qq.com/s/czoXZ-GhQGpWmCkd8kiAnA" target="_blank" rel="noopener noreffer ">stata数据清洗管理的常用技能知识, 资源错配的代码</a></p>
<h2 id="四stata-转-excel"><strong>四、STATA 转 EXCEL</strong></h2>
<p><strong>dta 文件如何转 excel?</strong></p>
<p><strong>代码为：</strong></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ada" data-lang="ada"><span class="line"><span class="cl"><span class="n">export</span> <span class="n">excel</span> <span class="n">using</span> <span class="s">&#34;data.xlsx&#34;</span><span class="p">,</span> <span class="n">firstrow</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>其中 firstrow (variables) 指 excel 行保留为变量名<br>
&ldquo;data. Xlsx&quot;是自己保存文件的命令<br>
对应的如果要指定文件保存位置，可以改成 &ldquo;E:\桌面\新建文件夹 (2)\stata\merge. Dta&rdquo;</p>
</blockquote>
<h2 id="五excel">五、EXCEL</h2>
<h3 id="0常见乱码">0、常见乱码</h3>
<p>一些下面这些样的 excel/csv 乱码是因为格式不对，例如下图，把文本框格式调整为日期即可。</p>
<p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113247442.webp" title="img" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113247442.webp" data-sub-html="<h2> </h2><p>img</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113247442.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113247442.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113247442.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113247442.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113247442.webp" />
    </a><figcaption class="image-caption">img</figcaption>
    </figure></p>
<h3 id="1vlookup-函数">1、VLOOKUP 函数</h3>
<p>用多了就觉得 stata 比 Excel 快多了。例如我做个一个任务是关描述统计乡村振兴水平，其中要展示各项指标平均值以上的村数，如果是 excel 还是比较麻烦的，涉及判断的（如果没有掌握 VBA 语言的话），stata 处理会更加快速。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ada" data-lang="ada"><span class="line"><span class="cl"><span class="n">global</span> <span class="err">$</span><span class="n">xlist</span> <span class="n">x1</span> <span class="n">x2</span> <span class="n">x3</span> <span class="n">x4</span> <span class="n">x5</span> 
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">foreach</span> <span class="n">i</span> <span class="ow">in</span> <span class="err">$</span><span class="n">xlist</span> <span class="err">{</span>
</span></span><span class="line"><span class="cl">	<span class="n">egen</span> <span class="n">b</span> <span class="o">=</span> <span class="n">mean</span><span class="p">(</span><span class="err">`</span><span class="n">i</span><span class="p">&#39;)</span>
</span></span><span class="line"><span class="cl">	<span class="n">gen</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="p">(</span><span class="n">b</span> <span class="o">&lt;</span> <span class="err">`</span><span class="n">i</span><span class="p">&#39;)</span><span class="o">+</span><span class="mi">0</span><span class="o">*</span><span class="p">(</span><span class="n">b</span><span class="o">&gt;=</span> <span class="err">`</span><span class="n">i</span><span class="p">&#39;)</span>
</span></span><span class="line"><span class="cl">	<span class="n">egen</span> <span class="n">sum_</span><span class="err">`</span><span class="n">i</span><span class="p">&#39;</span> <span class="o">=</span> <span class="n">sum</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>	
</span></span><span class="line"><span class="cl">	<span class="n">drop</span> <span class="n">a</span>
</span></span><span class="line"><span class="cl">	<span class="n">drop</span> <span class="n">b</span>
</span></span><span class="line"><span class="cl">  <span class="err">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>经济最好找数据和分析的肯定是城市面板数据了，<br>
少不了城市代码匹配</p>
</blockquote>
<p>请参考：<a href="https://zhuanlan.zhihu.com/p/463789763" target="_blank" rel="noopener noreffer ">链接</a>里还贴心地附上了城市代码，强烈感谢！</p>
<p>使用 vlookup 函数时，还可能遇见的一种<a href="https://zhidao.baidu.com/question/1242779765711800899.html#:~:text=%E4%BD%BF%E7%94%A8vlookup%E5%85%AC%E5%BC%8F%E5%90%8E%EF%BC%8C%E4%B8%8D%E6%98%BE%E7%A4%BA%E8%AE%A1%E7%AE%97%E7%BB%93%E6%9E%9C%EF%BC%8C%E5%8F%AA%E6%98%BE%E7%A4%BA%E6%88%91%E7%9A%84%E5%85%AC%E5%BC%8F%E7%9A%84%E5%8E%9F%E5%9B%A0%E6%98%AF%E6%88%91%E4%BB%AC%E5%B0%86%E6%9C%AC%E8%AF%A5%E6%98%BE%E7%A4%BA%E6%95%B0%E6%8D%AE%E7%9A%84%E5%8D%95%E5%85%83%E6%A0%BC%E8%AE%BE%E7%BD%AE%E6%88%90%E9%9D%9E%E6%96%87%E6%9C%AC%E6%A0%BC%E5%BC%8F%E4%BA%86%EF%BC%8C%E6%88%96%E8%80%85%E6%98%AF%E6%88%91%E4%BB%AC%E5%B0%86%E5%85%AC%E5%BC%8F%E9%80%89%E9%A1%B9%E5%8B%BE%E9%80%89%E4%B8%8A%E4%BA%86%E6%98%BE%E7%A4%BA%E5%85%AC%E5%BC%8F%EF%BC%8C%E8%A7%A3%E5%86%B3%E8%AF%A5%E9%97%AE%E9%A2%98%E7%9A%84%E5%85%B7%E4%BD%93%E6%93%8D%E4%BD%9C%E6%AD%A5%E9%AA%A4%E5%A6%82%E4%B8%8B%EF%BC%9A,1%E3%80%81%E5%A6%82%E5%9B%BE%E6%88%91%E4%BB%AC%E6%89%93%E5%BC%80%E7%94%B5%E8%84%91%E9%87%8C%E7%9A%84excel%E8%A1%A8%E6%A0%BC%E6%8F%92%E5%85%A5vlookup%E5%87%BD%E6%95%B0%E5%8F%91%E7%8E%B0%E4%B8%8D%E6%98%BE%E7%A4%BA%E7%BB%93%E6%9E%9C%E5%8F%AA%E6%98%BE%E7%A4%BA%E5%85%AC%E5%BC%8F%E3%80%82" target="_blank" rel="noopener noreffer ">情况</a>，excel 的格式设置真是千奇百怪！</p>
<h3 id="2数据透视表">2、数据透视表</h3>
<p>简单清洗<strong>计数</strong>和相对复杂的<strong>分组求和</strong>时用。</p>
<p>插入-数据透视，Excel 现在这个功能还挺智能的，主要是清洗一些需要累计的面板数据时非常好用。</p>
<blockquote>
<p>注意：数据透视表的“累加函数”需要 excel 格式为“数值”，“计数函数”则不限定格式。<br>
也有时候导入 excel 的数</p>
<p>
<figure class="center-figure"><a class="lightgallery" href="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113308920.webp" title="img" data-thumbnail="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113308920.webp" data-sub-html="<h2> </h2><p>img</p>">
        <img
            class="lazyload center-image"
            src="/svg/loading.min.svg"
            data-src="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113308920.webp"
            data-srcset="/img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113308920.webp, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113308920.webp 1.5x, /img/%e4%b8%80%e4%bb%bd%e7%bb%8f%e6%b5%8e%e5%be%ae%e8%a7%82%e6%95%b0%e6%8d%ae%e5%ba%93%e7%9a%84%e6%95%b0%e6%8d%ae%e6%b8%85%e6%b4%97%e5%bf%ab%e9%80%9f%e6%8c%87%e5%8d%97.zh-cn-20240523113308920.webp 2x"
            data-sizes="auto"
            alt="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113308920.webp" />
    </a><figcaption class="image-caption">img</figcaption>
    </figure> 据格式默认为“文本”，需要调整（至少先弄成“常规”格式)。</p>
</blockquote>
<h3 id="3字符拆卸">3、字符拆卸</h3>
<blockquote>
<p>就经济学的计量而言，目前顶流方案当属 DID。<br>
目前如果学校有学生计量论文比赛，大概率是“双重差分法”的纯肉搏（狗头）<br>
做 did 时我们就需要手动记录政策变量。比如智慧城市、创新城市分三批分别在几年内试点。<br>
这时候我们可不能傻乎乎地挨个复制粘贴，请使用 Excel 的字符拆分。</p>
</blockquote>
<p>比如拆试点城市的集合“北京，重庆，天津，上海”,</p>
<p>可以选中该空格，$数据\Rightarrow分列$，</p>
<p><strong>“文本分列向导”对话框选择“分隔符号”，点击“下一步”，勾选“分隔符号”中的“，”。</strong></p>
<p>此时就可以完成分行。再结合 VLOOKUP 函数匹配即可。</p>
<h3 id="4删改字符">4、删改字符</h3>
<p>巧妙运用 vlookup 已经能应对大多数情况，但依旧不够！数据清洗之坑防不胜防</p>
<blockquote>
<p>有些 Excel 文件 cityid 是 1100，有些是 110000<br>
有些是成都，有些则是成都<strong>市</strong>！</p>
</blockquote>
<ul>
<li>Excel 去字符操作：A 2=LEFT (A 1,LEN (A 1)-1)</li>
<li>Excel 加字符操作：A 2=A 1&amp;&ldquo;市&rdquo;</li>
</ul>
<h3 id="5数据库合并"><strong>5、数据库合并</strong></h3>
<blockquote>
<p><strong><a href="https://zhuanlan.zhihu.com/p/510963665" target="_blank" rel="noopener noreffer ">请看大屏幕</a>！</strong><br>
最开始觉得 Excel 这样用起来挺小白的，但会用 stata 后才会发现 data 文件合并的效率远比 Excel 高。</p>
</blockquote>
<h2 id="六结束">六、结束</h2>
<p>这几天经管之家关闭了,</p>
<p>发觉好多 stata 的基础问题都找不到问的地方，，，，，</p>
<p>90%的问题都是从知乎、经管之家、B 站找到的解决方法。</p>
<p><strong>可谓前人之述备矣，我只浅踩了几个坑。</strong></p>
<h2 id="参考">参考</h2>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>chip\cfps 网站经常崩掉，这点非常难受&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:2">
<p>赵涛, 张智, &amp; 梁上坤. (2020). 数字经济、创业活跃度与高质量发展——来自中国城市的经验证据. 管理世界, 36 (10), 65–76. <a href="https://doi.org/10.19744/j.cnki.11-1235/f.2020.0154[]%28https://www.sci-hub.ee/10.19744/j.cnki.11-1235/f.2020.0154%29" target="_blank" rel="noopener noreffer ">https://doi.org/10.19744/j.cnki.11-1235/f.2020.0154[](https://www.sci-hub.ee/10.19744/j.cnki.11-1235/f.2020.0154)</a>&#160;<a href="#fnref:2" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:3">
<p>可以关注自己学校的图书馆资源&#160;<a href="#fnref:3" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:4">
<p>数据库样本 id 匹配的省份和城市，在其网站 2013 年的数据中有，此后继续沿用但不再额外在其他年份里更新&#160;<a href="#fnref:4" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:5">
<p>stata 循环语句&#160;<a href="#fnref:5" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
<li id="fn:6">
<p><a href="https://stata-club.github.io/stata_article/2017-10-29.html" target="_blank" rel="noopener noreffer ">https://stata-club.github.io/stata_article/2017-10-29.html</a>&#160;<a href="#fnref:6" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2023-03-14</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/zh-cn/posts/data/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://blog.huaxiangshan.com/zh-cn/posts/data/" data-title="一份经济微观数据库的数据清洗快速指南" data-hashtags="Stata"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://blog.huaxiangshan.com/zh-cn/posts/data/" data-hashtag="Stata"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://blog.huaxiangshan.com/zh-cn/posts/data/" data-title="一份经济微观数据库的数据清洗快速指南"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://blog.huaxiangshan.com/zh-cn/posts/data/" data-title="一份经济微观数据库的数据清洗快速指南"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@7.3.0/icons/line.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://blog.huaxiangshan.com/zh-cn/posts/data/" data-title="一份经济微观数据库的数据清洗快速指南" data-image="/img/一份经济微观数据库的数据清洗快速指南.zh-cn-20240523113145919.webp"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/zh-cn/tags/stata/">Stata</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/zh-cn/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/zh-cn/posts/soul/" class="prev" rel="prev" title="盛世与妖术并行，“权力幻觉”近在迟尺"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>盛世与妖术并行，“权力幻觉”近在迟尺</a>
            <a href="/zh-cn/posts/moviedoor/" class="next" rel="next" title="2023 电影谈: 门的那一侧">2023 电影谈: 门的那一侧<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="giscus" class="comment"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app">Giscus</a>.
            </noscript></div></article></div>
            </main><script>

(function() {
  console.log('[Music Player] Enhanced initialization script loaded');

  
  const CDN_SOURCES = [
    'https://cdn.jsdelivr.net/npm/',
    'https://unpkg.com/',
    'https://cdnjs.cloudflare.com/ajax/libs/'
  ];

  const APLAYER_CSS = 'aplayer@1.10.1/dist/APlayer.min.css';
  const APLAYER_JS = 'aplayer@1.10.1/dist/APlayer.min.js';
  const METING_JS = 'meting@2.0.1/dist/Meting.min.js';

  
  function safeHasMusicPlayers() {
    try {
      return document.querySelectorAll('meting-js').length > 0;
    } catch (e) {
      console.warn('[Music Player] Error checking for music players:', e);
      return false;
    }
  }

  function safeResourcesLoaded() {
    try {
      return typeof window.APlayer !== 'undefined' && typeof window.Meting !== 'undefined';
    } catch (e) {
      console.warn('[Music Player] Error checking resources:', e);
      return false;
    }
  }

  
  function loadResource(url, resourceType, retries = 2) {
    return new Promise((resolve, reject) => {
      const isCSS = resourceType === 'css';
      const isJS = resourceType === 'js';

      
      const existing = isCSS
        ? document.querySelector(`link[href*="${url.split('/').pop()}"]`)
        : document.querySelector(`script[src*="${url.split('/').pop()}"]`);

      if (existing) {
        console.log(`[Music Player] Resource already loaded: ${url}`);
        resolve();
        return;
      }

      const element = isCSS ? document.createElement('link') : document.createElement('script');

      if (isCSS) {
        element.rel = 'stylesheet';
        element.href = url;
      } else {
        element.src = url;
      }

      let attempts = 0;

      const attemptLoad = () => {
        attempts++;

        element.onload = () => {
          console.log(`[Music Player] Successfully loaded: ${url}`);
          resolve();
        };

        element.onerror = (err) => {
          console.warn(`[Music Player] Failed to load ${url} (attempt ${attempts}/${retries + 1})`);

          if (attempts <= retries) {
            
            const nextCDN = CDN_SOURCES.find(cdn => url.startsWith(cdn));
            if (nextCDN) {
              const nextUrl = url.replace(nextCDN, CDN_SOURCES[(CDN_SOURCES.indexOf(nextCDN) + 1) % CDN_SOURCES.length]);
              console.log(`[Music Player] Retrying with alternative CDN: ${nextUrl}`);
              if (isCSS) {
                element.href = nextUrl;
              } else {
                element.src = nextUrl;
              }
              setTimeout(attemptLoad, 500);
            } else {
              reject(err);
            }
          } else {
            reject(err);
          }
        };

        
        if (isCSS) {
          document.head.appendChild(element);
        } else {
          document.body.appendChild(element);
        }
      };

      attemptLoad();
    });
  }

  
  function loadDependencies() {
    console.log('[Music Player] Loading dependencies with fallback support...');

    
    const primaryCDN = CDN_SOURCES[0];

    return loadResource(primaryCDN + APLAYER_CSS, 'css', 1)
      .then(() => {
        console.log('[Music Player] APlayer CSS loaded');
        return loadResource(primaryCDN + APLAYER_JS, 'js', 1);
      })
      .then(() => {
        console.log('[Music Player] APlayer JS loaded');
        return loadResource(primaryCDN + METING_JS, 'js', 1);
      })
      .then(() => {
        console.log('[Music Player] All dependencies loaded successfully');
        return true;
      })
      .catch(async (err) => {
        console.error('[Music Player] Primary CDN failed, trying alternative CDNs:', err);

        
        for (let i = 1; i < CDN_SOURCES.length; i++) {
          try {
            const cdn = CDN_SOURCES[i];
            console.log(`[Music Player] Trying CDN: ${cdn}`);

            await loadResource(cdn + APLAYER_CSS, 'css', 0);
            await loadResource(cdn + APLAYER_JS, 'js', 0);
            await loadResource(cdn + METING_JS, 'js', 0);

            console.log('[Music Player] Successfully loaded from alternative CDN');
            return true;
          } catch (altErr) {
            console.warn(`[Music Player] CDN ${CDN_SOURCES[i]} failed:`, altErr);
            continue;
          }
        }

        console.error('[Music Player] All CDN attempts failed');
        return false;
      });
  }

  
  function initializePlayers() {
    try {
      if (!safeResourcesLoaded()) {
        console.error('[Music Player] Cannot initialize: dependencies not loaded');
        return false;
      }

      console.log('[Music Player] Initializing meting-js players...');
      let successCount = 0;
      let errorCount = 0;

      const players = document.querySelectorAll('meting-js');

      players.forEach(el => {
        try {
          if (el.hasAttribute('data-initialized')) {
            console.log('[Music Player] Player already initialized, skipping');
            return;
          }

          
          if (typeof window.Meting !== 'function') {
            throw new Error('Meting constructor not available');
          }

          new window.Meting(el);
          el.setAttribute('data-initialized', 'true');
          successCount++;
          console.log('[Music Player] Successfully initialized meting-js element');
        } catch (err) {
          errorCount++;
          console.error('[Music Player] Error initializing meting-js element:', err);
        }
      });

      console.log(`[Music Player] Initialization complete: ${successCount} successful, ${errorCount} failed`);

      
      if (successCount === 0 && players.length > 0) {
        console.log('[Music Player] No players initialized, scheduling retry...');
        setTimeout(() => {
          console.log('[Music Player] Retrying initialization...');
          initializePlayers();
        }, 1000);
      }

      return successCount > 0;
    } catch (error) {
      console.error('[Music Player] Fatal error during initialization:', error);
      return false;
    }
  }

  
  function initMusicPlayers() {
    console.log('[Music Player] Initialization triggered');

    try {
      if (!safeHasMusicPlayers()) {
        console.log('[Music Player] No meting-js elements found');
        return;
      }

      const playerCount = document.querySelectorAll('meting-js').length;
      console.log(`[Music Player] Found ${playerCount} meting-js element(s)`);

      
      if (safeResourcesLoaded()) {
        console.log('[Music Player] Resources already loaded, initializing...');
        setTimeout(() => initializePlayers(), 50);
        return;
      }

      
      const scripts = Array.from(document.querySelectorAll('script[src]'));
      const hasAPlayerScript = scripts.some(s => s.src.includes('APlayer.min.js'));
      const hasMetingScript = scripts.some(s => s.src.includes('Meting.min.js'));

      if (hasAPlayerScript || hasMetingScript) {
        console.log('[Music Player] Resources detected in DOM, waiting for load...');
        waitForResources();
        return;
      }

      
      console.log('[Music Player] Loading dependencies dynamically...');
      loadDependencies().then(success => {
        if (success) {
          console.log('[Music Player] Dependencies loaded, initializing players...');
          setTimeout(() => initializePlayers(), 100);
        } else {
          console.error('[Music Player] Failed to load dependencies, will retry in 2s');
          setTimeout(initMusicPlayers, 2000);
        }
      });
    } catch (error) {
      console.error('[Music Player] Error in initialization flow:', error);
    }
  }

  
  function waitForResources() {
    const maxWaitTime = 10000; 
    const checkInterval = 250;
    let elapsed = 0;
    let timeoutId = null;

    const check = () => {
      elapsed += checkInterval;

      if (safeResourcesLoaded()) {
        console.log(`[Music Player] Resources loaded after ${elapsed}ms`);
        setTimeout(() => initializePlayers(), 50);
        return;
      }

      if (elapsed >= maxWaitTime) {
        console.warn('[Music Player] Timeout waiting for resources, loading dynamically...');
        loadDependencies().then(success => {
          if (success) {
            setTimeout(() => initializePlayers(), 100);
          }
        });
        return;
      }

      timeoutId = setTimeout(check, checkInterval);
    };

    check();
  }

  
  function startInitialization() {
    
    setTimeout(initMusicPlayers, 100);
  }

  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
      console.log('[Music Player] DOMContentLoaded event fired');
      startInitialization();
    });
  } else {
    console.log('[Music Player] DOM already loaded');
    startInitialization();
  }

  
  if (typeof document.addEventListener === 'function') {
    document.addEventListener('pjax:end', function() {
      console.log('[Music Player] PJAX navigation detected');
      setTimeout(initMusicPlayers, 100);
    });
  }

  
  document.addEventListener('visibilitychange', function() {
    if (!document.hidden) {
      setTimeout(() => {
        if (document.querySelectorAll('meting-js').length > 0 && !safeResourcesLoaded()) {
          console.log('[Music Player] Page visible again, checking music players...');
          initMusicPlayers();
        }
      }, 500);
    }
  });

  
  window.initMusicPlayers = initMusicPlayers;
  console.log('[Music Player] Initialization system ready');
})();
</script>



    
    <footer class="footer">
        <div class="footer-container">
            <div class="footer-line">
                <span id="run-time" data-i18n="runtime"></span>
            </div><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.122.0">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreferrer" title="LoveIt 0.2.11"><i class="far fa-kiss-wink-heart fa-fw" aria-hidden="true"></i> LoveIt</a>
                </div>

            <div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2024 - 2026</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/hzp2333/hzp2333.github.io" target="_blank">滑翔闪</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span>
            </div>

            <style>
                .footerImg {
                    height: 20px;
                }
            </style>
            <div class="footer-line custom">
                <a href="https://icp.gov.moe/?keyword=20244204" target="_blank">萌ICP备20244204号</a>
                <a style="text-decoration:none;color:#55bb8a;" href="https://travel.moe/go.html" title="异次元之旅-跃迁-我们一起去萌站成员的星球旅行吧！" target="_blank">
                    <img src="https://travel.moe/images/icon/icon64green.png" style="width:24px;height:24px" alt="异次元之旅">异次元之旅
                </a>
            </div>

            <div class="footer-line custom">
                <a href="https://www.travellings.cn/go.html" target="_blank">
                    <img src="https://www.travellings.cn/assets/logo.gif" class="footerImg" alt="开往-友链接力 v1.5" title="开往-友链接力 v1.5">
                </a>
                <a href="https://www.foreverblog.cn/" target="_blank">
                    <img src="https://foreverblog.cn/assets/logo/logo_en_default.png" class="footerImg" alt="Forever Blog">
                </a>
                <a href="https://www.foreverblog.cn/go.html" target="_blank">
                    <img src="https://foreverblog.cn/assets/logo/wormhole_2.gif" class="footerImg" alt="穿梭虫洞-随机访问十年之约友链博客" title="穿梭虫洞-随机访问十年之约友链博客">
                </a>
            </div><div class="footer-line">
  <i class="fas fa-book fa-fw" aria-hidden="true"></i>&nbsp;共 97 篇文章，346396 字</div>
    
        
        <script async src=" //busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js "></script>
    

    
        
            <section>
                
                    <span id="busuanzi_container_value_site_pv"><i class="far fa-eye fa-fw"></i>
                        
                        <span id="busuanzi_value_site_pv"></span>
                    </span>
                

                
                    &nbsp;|&nbsp;              
                

                
                    <span id="busuanzi_container_value_site_uv"><i class="fa fa-user"></i>
                        
                        <span id="busuanzi_value_site_uv"></span>
                    </span>
                
            </section>
        

        
        
    


</div>
    </footer>
 

    
    <script src="https://cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js" 
        data-color="0,0,0" 
        data-count="150" 
        data-zIndex="-1">
    </script>
</body>
</html>



</div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/css/lightgallery-bundle.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.38.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.9/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.3.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/thumbnail/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery@2.5.0/plugins/zoom/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.11/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.5.1/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/typeit@8.6.0/dist/index.umd.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":50},"comment":{"giscus":{"category":"Announcements","categoryId":"DIC_kwDOLbBjxM4Cdr0n","darkTheme":"dark_dimmed","emitMetadata":"0","inputPosition":"bottom","lang":"zh-CN","lazyLoading":false,"lightTheme":"light","mapping":"pathname","reactionsEnabled":"1","repo":"hzp2333/Giscus","repoId":"R_kgDOLbBjxA"}},"data":{"id-1":"滑翔闪'S BLOG","id-2":"滑翔闪'S BLOG"},"lightgallery":true,"search":{"highlightTag":"em","lunrIndexURL":"/zh-cn/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"},"typeit":{"cursorChar":"|","cursorSpeed":1000,"data":{"id-1":["id-1"],"id-2":["id-2"]},"duration":-1,"speed":100}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js"></script><script type="text/javascript" src="/js/custom.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-CYZVM6VVZ8', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-CYZVM6VVZ8" async></script></body>
</html>
