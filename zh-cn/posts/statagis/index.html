<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Stata绘制Gis着色图 - 滑翔闪&#39;S BLOG</title><meta name="Description" content=""><meta property="og:title" content="Stata绘制Gis着色图" />
<meta property="og:description" content="使用Stata绘制GIS着色图，包括九段线、省县市的模板" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://blog.huaxiangshan.com/zh-cn/posts/statagis/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-03-22T19:39:56+08:00" />
<meta property="article:modified_time" content="2024-03-22T19:39:56+08:00" />

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Stata绘制Gis着色图"/>
<meta name="twitter:description" content="使用Stata绘制GIS着色图，包括九段线、省县市的模板"/>
<meta name="application-name" content="滑翔闪&#39;S BLOG">
<meta name="apple-mobile-web-app-title" content="滑翔闪&#39;S BLOG"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://blog.huaxiangshan.com/zh-cn/posts/statagis/" /><link rel="prev" href="https://blog.huaxiangshan.com/zh-cn/posts/toc/" /><link rel="next" href="https://blog.huaxiangshan.com/zh-cn/posts/fs/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Stata绘制Gis着色图",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/blog.huaxiangshan.com\/zh-cn\/posts\/statagis\/"
        },"genre": "posts","keywords": "Stata, Gis","wordcount":  8325 ,
        "url": "https:\/\/blog.huaxiangshan.com\/zh-cn\/posts\/statagis\/","datePublished": "2024-03-22T19:39:56+08:00","dateModified": "2024-03-22T19:39:56+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "滑翔闪"},"author": {
                "@type": "Person",
                "name": "滑翔闪"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="" data-header-mobile=""><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper">

<a href="https://www.travellings.cn/go.html" target="_blank" rel="noopener" title="开往-友链接力">
    <img src="https://www.travellings.cn/assets/logo.gif" alt="开往-友链接力" width="120">
</a>


<script type="text/javascript" src="https://www.liuzehe.top/upload/bkjs/meme.js"></script>
<canvas class="fireworks" style="position:fixed;left:0;top:0;z-index:99999999;pointer-events:none;"></canvas>
<script type="text/javascript" src="https://www.liuzehe.top/upload/bkjs/anime.min.js"></script>
<script type="text/javascript" src="https://www.liuzehe.top/upload/bkjs/fireworks.js"></script> 

<script defer src="https://cdn.jsdelivr.net/npm/akilar-live2d-widget/autoload.min.js"></script>


<script type="text/javascript" color="0,174,255" opacity='0.7' zIndex="-2" count="200" src="https://www.liuzehe.top/upload/bkjs/bj.js"></script>


<script src="/js/yh.js"></script><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/zh-cn/" title="滑翔闪&#39;S BLOG"><span id="id-2" class="typeit"></span></a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/zh-cn/posts/" title="书中自有黄金屋"><i class='fa fa-solid fa-book'></i> 文章 </a><a class="menu-item" href="/zh-cn/tags/" title="定义文章，不定义世界"><i class='fa fa-tag'></i> 标签 </a><a class="menu-item" href="/zh-cn/categories/" title="分类是种视角"><i class='fa fa-archive'></i> 分类 </a><a class="menu-item" href="/zh-cn/friends/" title="有朋自远方来"><i class='fa fa-user-group'></i> 友链  </a><a class="menu-item" href="https://www.travellings.cn/go.html" title="漫长的列车驶向未来" rel="noopener noreffer" target="_blank"><i class='fa fa-train-subway'></i> 开往  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="选择语言">简体中文<i class="fas fa-chevron-right fa-fw" aria-hidden="true"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/zh-cn/posts/statagis/" selected>简体中文</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/zh-cn/" title="滑翔闪&#39;S BLOG"><span id="id-3" class="typeit"></span></a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/zh-cn/posts/" title="书中自有黄金屋"><i class='fa fa-solid fa-book'></i>文章</a><a class="menu-item" href="/zh-cn/tags/" title="定义文章，不定义世界"><i class='fa fa-tag'></i>标签</a><a class="menu-item" href="/zh-cn/categories/" title="分类是种视角"><i class='fa fa-archive'></i>分类</a><a class="menu-item" href="/zh-cn/friends/" title="有朋自远方来"><i class='fa fa-user-group'></i>友链 </a><a class="menu-item" href="https://www.travellings.cn/go.html" title="漫长的列车驶向未来" rel="noopener noreffer" target="_blank"><i class='fa fa-train-subway'></i>开往 </a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">简体中文<i class="fas fa-chevron-right fa-fw" aria-hidden="true"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/zh-cn/posts/statagis/" selected>简体中文</option></select>
                </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Stata绘制Gis着色图</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/hzp2333/hzp2333.github.io" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>滑翔闪</a>
</span>&nbsp;<span class="post-category">类别 <a href="/zh-cn/categories/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E5%85%B7/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>软件工具</a>&nbsp;<a href="/zh-cn/categories/%E7%BB%8F%E6%B5%8E%E5%AD%A6%E4%B9%A0/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>经济学习</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2024-03-22">2024-03-22</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;约 8325 字&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;预计阅读 17 分钟&nbsp;</div>
        </div><div class="featured-image"><img
        class="lazyload"
        src="/svg/loading.min.svg"
        data-src="/img/image-20240324230945426.png"
        data-srcset="/img/image-20240324230945426.png, /img/image-20240324230945426.png 1.5x, /img/image-20240324230945426.png 2x"
        data-sizes="auto"
        alt="/img/image-20240324230945426.png"
        title="/img/image-20240324230945426.png" /></div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#获取地图文件">获取地图文件</a></li>
    <li><a href="#statagis初步操作">stataGis初步操作</a>
      <ul>
        <li><a href="#下载相关命令">下载相关命令</a></li>
        <li><a href="#转译和编译乱码">转译和编译乱码</a></li>
        <li><a href="#匹配数据和标签文件">匹配数据和标签文件</a></li>
        <li><a href="#绘图命令">绘图命令</a></li>
        <li><a href="#参数解释">参数解释</a></li>
      </ul>
    </li>
    <li><a href="#处理流程图">处理流程图</a></li>
    <li><a href="#国内省级">国内省级</a>
      <ul>
        <li><a href="#正式绘图">正式绘图</a></li>
        <li><a href="#其他例子">其他例子</a></li>
        <li><a href="#调节指南针和图例">调节指南针和图例</a></li>
      </ul>
    </li>
    <li><a href="#国内市级">国内市级</a></li>
    <li><a href="#国内县级">国内县级</a></li>
    <li><a href="#geoplot命令">geoplot命令</a>
      <ul>
        <li><a href="#下载相关命令-1">下载相关命令</a></li>
        <li><a href="#载入数据">载入数据</a></li>
        <li><a href="#画图">画图</a>
          <ul>
            <li><a href="#基本命令">基本命令</a></li>
            <li><a href="#气泡图">气泡图</a></li>
            <li><a href="#局部放大图">局部放大图</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#地图使用规范">地图使用规范</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><meting-js server="netease" type="song" id="2034615687" theme="#448aff"></meting-js>
<p>估计每个经济学学习者都向往过掌握全套统计语言的自己——Python机器学习与爬虫，Stata计量回归，R绘图和文本分析，Gis遥感与着色，Matlab解均衡模型和仿真实验。不过人的精力终究还是有限的，个人决定先尝试用Stata实现其他语言的优势项目，例如stata:<a href="https://blog.huaxiangshan.com/zh-cn/posts/pachong/" target="_blank" rel="noopener noreffer">爬虫学习</a>
。</p>
<p>今天这里记录的是用Stata画Gis着色图的过程。</p>
<p>本文列举所有数据可在<a href="https://github.com/hzp2333/STATAGIS" target="_blank" rel="noopener noreffer">仓库</a>
下载。</p>
<h2 id="获取地图文件" class="headerLink">
    <a href="#%e8%8e%b7%e5%8f%96%e5%9c%b0%e5%9b%be%e6%96%87%e4%bb%b6" class="header-mark"></a>获取地图文件</h2><p><code>ESRI Shapefile</code>文件是由<a href="https://www.esri.com/en-us/home" target="_blank" rel="noopener noreffer">美国环境系统研究所</a>
开发的空间地理数据。里面同时储存空间位置和特征数据。其基本文件主要为：</p>
<ul>
<li><strong>主文件 (.shp)：</strong> 存储几何要素的的空间信息，也就是 XY 坐标。</li>
<li><strong>索引文件 (.shx)：</strong> 存储有关 .shp 存储的索引信息。它记录了在 .shp 中，空间数据是如何存储的，XY 坐标的输入点在哪里，有多少 XY 坐标对等信息。</li>
<li><strong>表文件 (.dbf)：</strong> 存储地理数据的属性信息的 dBase 表。</li>
</ul>
<p>这里介绍写我找到的一些数据源：</p>
<ul>
<li>
<p><a href="http://gaohr.win/site/blogs/2017/2017-04-18-GIS-basic-data-of-China.html" target="_blank" rel="noopener noreffer">大饼的博客</a>
</p>
</li>
<li>
<p><a href="https://www.webmap.cn/main.do?method=index" target="_blank" rel="noopener noreffer">全国地理信息资源目录服务系统</a>
</p>
</li>
<li>
<p><a href="https://gadm.org/data.html" target="_blank" rel="noopener noreffer">GADM data</a>
：国际地图很全。</p>
</li>
<li>
<p><a href="https://github.com/GaryBikini/ChinaAdminDivisonSHP" target="_blank" rel="noopener noreffer">github随手找到的中国地图数据</a>
</p>
</li>
<li>
<p><a href="https://github.com/Wsf921109/stata-prov-map?tab=readme-ov-file" target="_blank" rel="noopener noreffer">Rstata资料</a>
：中国地图省级分区。国内买课世界一流，个人觉得stata专题做得最好的是“连享会&quot;和&quot;Rstata&quot;。即便我是坚定的<del>白嫖</del>开源主义，也经常看他们的科普文章学习stata。此处是有好心人上传了Rstata相关的数据库。</p>
</li>
<li>
<p><a href="https://www.resdc.cn/Default.aspx" target="_blank" rel="noopener noreffer">中科院地资所</a>
：或许是国内的半官方？</p>
<p>
<figure><a class="lightgallery" href="/img/image-20240323132924391.png" title="中科院地资所" data-thumbnail="/img/image-20240323132924391.png" data-sub-html="<h2> </h2><p>中科院地资所</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/image-20240323132924391.png"
            data-srcset="/img/image-20240323132924391.png, /img/image-20240323132924391.png 1.5x, /img/image-20240323132924391.png 2x"
            data-sizes="auto"
            alt="/img/image-20240323132924391.png" />
    </a><figcaption class="image-caption">中科院地资所</figcaption>
    </figure></p>
</li>
</ul>
<p>如果还找不到自己想要的，可以使用阿里云地图来生成地图文件。</p>
<p>进入<a href="http://datav.aliyun.com/portal/school/atlas/area_selector" target="_blank" rel="noopener noreffer">阿里云地图</a>
，点击文件下载（推荐其他下载，下载后得到<code>.json</code>文件）。</p>
<p>下载好后进入<a href="https://mapshaper.org/" target="_blank" rel="noopener noreffer">转化器</a>
转化。点击<code>Select</code>，上传<code>.json</code>文件，然后点击<code>export</code>导出转化后的文件。</p>
<blockquote>
<p>似乎是因为数据编码或者加密，有时候转阿里云地图化的文件无法被stata读取。</p>
<p>此时使用<code>spshape2dta</code>转化</p>
</blockquote>
<h2 id="statagis初步操作" class="headerLink">
    <a href="#statagis%e5%88%9d%e6%ad%a5%e6%93%8d%e4%bd%9c" class="header-mark"></a>stataGis初步操作</h2><h3 id="下载相关命令" class="headerLink">
    <a href="#%e4%b8%8b%e8%bd%bd%e7%9b%b8%e5%85%b3%e5%91%bd%e4%bb%a4" class="header-mark"></a>下载相关命令</h3><p>包含<code>主文件 (.shp)</code>和<code>表文件 (.dbf)</code>即可。</p>
<p>提前在stata下载相关命令。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">shp2dta</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">   </span><span class="o">//</span><span class="err">文件转化命令</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">mif2dta</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">  </span><span class="o">//</span><span class="err">文件转化命令</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">spmap</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">  </span><span class="o">//</span><span class="n">GIS画图命令</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="转译和编译乱码" class="headerLink">
    <a href="#%e8%bd%ac%e8%af%91%e5%92%8c%e7%bc%96%e8%af%91%e4%b9%b1%e7%a0%81" class="header-mark"></a>转译和编译乱码</h3><p>使用B站一位用户用GIS画的文件：<a href="https://pan.baidu.com/s/1lybhxKO3EL5JKATULS-0CA?pwd=zkks" target="_blank" rel="noopener noreffer">2019中国地图-审图号GS(2019)1822号</a>
</p>
<p>这里个人使用的举例数据是：<a href="https://idf.pku.edu.cn/yjcg/zsbg/513800.htm" target="_blank" rel="noopener noreffer">北大数字普惠金融指数2011_2020</a>
</p>
<p>这里要转译的有两个文件，中国地图文件<code>市</code>和九段线文件<code>九段线</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">cd</span><span class="w"> </span><span class="n">F</span><span class="p">:</span><span class="err">\桌面\</span><span class="n">GIS_sum</span><span class="err">\</span><span class="mi">2019</span><span class="err">中国地图审图号\例子</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="err">设置工作环境文件夹，因为</span><span class="n">gis一些命令参数使用相对路径更好用些</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="n">excel</span><span class="w"> </span><span class="s2">&#34;F:\桌面\GIS_sum\2019中国地图审图号\例子\北大数字普惠金融指数2011_2020.xlsx&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">sheet</span><span class="p">(</span><span class="s2">&#34;Sheet1&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">firstrow</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">keep</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="k">year</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2020</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">rename</span><span class="w"> </span><span class="n">pref_name_year18</span><span class="w"> </span><span class="n">ct_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="n">d2020data</span><span class="w"> </span><span class="p">,</span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="err">载入数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">spshape2dta</span><span class="w"> </span><span class="err">市</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">spshape2dta</span><span class="w"> </span><span class="err">九段线</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="err">这里因为无法用</span><span class="n">shp2dta转化所以使用spshape2dta</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">cd</span><span class="w"> </span><span class="n">F</span><span class="p">:</span><span class="err">\桌面\</span><span class="n">GIS_sum</span><span class="err">\</span><span class="mi">2019</span><span class="err">中国地图审图号\例子</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">unicode</span><span class="w"> </span><span class="k">encoding</span><span class="w"> </span><span class="k">set</span><span class="w"> </span><span class="n">gb18030</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">unicode</span><span class="w"> </span><span class="k">analyze</span><span class="w"> </span><span class="err">市</span><span class="p">.</span><span class="n">dta</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">unicode</span><span class="w"> </span><span class="k">translate</span><span class="w"> </span><span class="err">市</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">invalid</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="err">部分中文乱码重新编译</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">//</span><span class="err">一次性命令，若要重新使用需要删掉目录生成的编码文件</span><span class="n">bak</span><span class="p">.</span><span class="n">stunicode</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>若文件无法被转化，例如阿里云的地图，似乎gis做的地图也无法被<code>shp2dta</code>转化。这里就是使用的<code>spshape2dta</code>转化。</p>
<blockquote>
<p>两个命令除了这一点外<a href="https://www.cda.cn/discuss/post/details/61cd24316276b453ec6f9bc2" target="_blank" rel="noopener noreffer">区别不大</a>
。<code>spshape2dta</code>命令缺点是不能自定义名字，后面直接跟文件名即可，会自动生成两个需要的文件。标签文件为<code>.dta</code>,轮廓文件为<code>_shp.dta</code></p>
</blockquote>
<h3 id="匹配数据和标签文件" class="headerLink">
    <a href="#%e5%8c%b9%e9%85%8d%e6%95%b0%e6%8d%ae%e5%92%8c%e6%a0%87%e7%ad%be%e6%96%87%e4%bb%b6" class="header-mark"></a>匹配数据和标签文件</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">use</span><span class="w"> </span><span class="err">市</span><span class="p">.</span><span class="n">dta</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">rename</span><span class="w"> </span><span class="n">__</span><span class="w"> </span><span class="n">ct_name</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="err">市</span><span class="p">.</span><span class="n">dta</span><span class="w"> </span><span class="p">,</span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">d2020data</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">merge</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="n">ct_name</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="err">市</span><span class="p">.</span><span class="n">dta</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">drop</span><span class="w"> </span><span class="n">_merge</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gen</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="o">=</span><span class="n">_ID</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="n">city_data2020</span><span class="p">,</span><span class="k">replace</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="绘图命令" class="headerLink">
    <a href="#%e7%bb%98%e5%9b%be%e5%91%bd%e4%bb%a4" class="header-mark"></a>绘图命令</h3><p>开始绘图，基本绘图命令如下</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">grmap</span><span class="w"> </span><span class="n">digitization_level</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="err">市</span><span class="n">_shp</span><span class="p">.</span><span class="n">dta</span><span class="w">  </span><span class="p">,</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="n">ocolor</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">clmethod</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="n">clbreaks</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">190</span><span class="w"> </span><span class="mi">200</span><span class="w"> </span><span class="mi">280</span><span class="w"> </span><span class="mi">300</span><span class="w"> </span><span class="mi">350</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fcolor</span><span class="p">(</span><span class="n">gray</span><span class="w"> </span><span class="s2">&#34;224 242 241&#34;</span><span class="w"> </span><span class="s2">&#34;178 223 219&#34;</span><span class="w"> </span><span class="s2">&#34;128 203 196&#34;</span><span class="w"> </span><span class="s2">&#34;77 182 172&#34;</span><span class="w"> </span><span class="s2">&#34;38 166 154&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">leg</span><span class="p">(</span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;无数据&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;0~190&#34;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;190~200&#34;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;200~280&#34;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;280~300&#34;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="s2">&#34;300~350&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="err">九段线</span><span class="n">_shp</span><span class="p">.</span><span class="n">dta</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;2020 年数字普惠金融指数&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">subti</span><span class="p">(</span><span class="s2">&#34;二级标题&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;数据来源：北大数字普惠金融指数&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>
<figure><a class="lightgallery" href="/img/image-20240324105155970.png" title="就画图命令而言，spmap和grmap似乎没有区别" data-thumbnail="/img/image-20240324105155970.png" data-sub-html="<h2> </h2><p>就画图命令而言，spmap和grmap似乎没有区别</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/image-20240324105155970.png"
            data-srcset="/img/image-20240324105155970.png, /img/image-20240324105155970.png 1.5x, /img/image-20240324105155970.png 2x"
            data-sizes="auto"
            alt="/img/image-20240324105155970.png" />
    </a><figcaption class="image-caption">就画图命令而言，spmap和grmap似乎没有区别</figcaption>
    </figure></p>
<h3 id="参数解释" class="headerLink">
    <a href="#%e5%8f%82%e6%95%b0%e8%a7%a3%e9%87%8a" class="header-mark"></a>参数解释</h3><p>以下参数解释由GPT3.5给出，个人进行简单补充。</p>
<ul>
<li>
<p><code>grmap type</code>：指定图形类型为地图。</p>
</li>
<li>
<p><code>using chinaprov40_coord.dta</code>：指定地图数据文件，包含省级行政区划的坐标信息。</p>
</li>
<li>
<p><code>id(ID)</code>：指定地图数据中的唯一标识符变量。通过标识对应地图坐标和标签和数据。</p>
</li>
<li>
<p><code>osize(vvthin ...)</code> 和 <code>ocolor(white ...)</code>：设置地图边界线的粗细和颜色。</p>
</li>
<li>
<p><code>vvthin</code> 是 Stata 中一种预定义的线条样式，它表示非常细的线条。在绘制地图时，可以使用不同的线条粗细来区分不同的地理要素或边界。</p>
<blockquote>
<p>从细到粗排列为：vvthin、vthin、thin、medium、thick、vthick、vvthick。</p>
</blockquote>
</li>
<li>
<p><code>clmethod(custom)</code> 和 <code>clbreaks(0 1 2 3 4 5)</code>：自定义分类方法和分类间隔。这里对应的是省级分类，直辖市，省，特别行政区&hellip;</p>
</li>
<li>
<p><code>fcolor(...)</code>：指定不同分类的填充颜色。</p>
<blockquote>
<p>例子中采用的是三元色定义表示，可以用PPT的颜色自定义查看颜色标识。</p>
</blockquote>
<p>
<figure><a class="lightgallery" href="/img/image-20240323162244343.png" title="三元色定义" data-thumbnail="/img/image-20240323162244343.png" data-sub-html="<h2> </h2><p>三元色定义</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/image-20240323162244343.png"
            data-srcset="/img/image-20240323162244343.png, /img/image-20240323162244343.png 1.5x, /img/image-20240323162244343.png 2x"
            data-sizes="auto"
            alt="/img/image-20240323162244343.png" />
    </a><figcaption class="image-caption">三元色定义</figcaption>
    </figure></p>
</li>
<li>
<p><code>leg(...)</code>：设置图例的顺序和标签。</p>
</li>
<li>
<p><code>graphr(margin(medium))</code>：设置图形的边距。</p>
</li>
<li>
<p><code>line(data(chinaprov40_line_coord.dta) by(group) ...)</code>：绘制地图边界线，指定边界线数据文件和颜色等属性。这里用的是九段线文件。</p>
</li>
<li>
<p><code>polygon(data(polygon) fcolor(black) ...)</code>：绘制地图多边形，指定填充颜色和线条粗细等属性。这里是图例和指南针。</p>
</li>
<li>
<p><code>label(data(chinaprov40_label) ...)</code>：标注地图上的标签，指定标签数据文件和标签文本等属性。<code>label(ename)</code>是英文，<code>label(cnname)</code>是中文。</p>
</li>
<li>
<p><code>ti(&quot;一级标题: 2019 年中国省级行政区划&quot;)</code>：设置主标题。</p>
</li>
<li>
<p><code>subti(&quot;二级标题&quot;)</code>：设置副标题。</p>
</li>
<li>
<p><code>caption(&quot;使用 Stata 绘制中国省级地图&quot;, size(*0.8))</code>：设置图形的说明。</p>
</li>
</ul>
<h2 id="处理流程图" class="headerLink">
    <a href="#%e5%a4%84%e7%90%86%e6%b5%81%e7%a8%8b%e5%9b%be" class="header-mark"></a>处理流程图</h2><blockquote>
<p>地图线条数据（非必要）：例如山川、河流、山脉、九段线、秦岭淮河、胡焕庸线的线条。</p>
</blockquote>
<div class="mermaid" id="id-1"></div>
<h2 id="国内省级" class="headerLink">
    <a href="#%e5%9b%bd%e5%86%85%e7%9c%81%e7%ba%a7" class="header-mark"></a>国内省级</h2><blockquote>
<p>来自Rstata。可以从<a href="https://github.com/Wsf921109/stata-prov-map" target="_blank" rel="noopener noreffer">github仓库</a>
下载学习材料——GIS地图省级面板和相关数据。</p>
</blockquote>
<div class="bilibili"><iframe src="//player.bilibili.com/player.html?bvid=BV12L411J7Vt&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe></div>

<div class="details admonition tip">
        <div class="details-summary admonition-title">
            <i class="icon fas fa-lightbulb fa-fw" aria-hidden="true"></i>文件简介<i class="details-icon fas fa-angle-right fa-fw" aria-hidden="true"></i>
        </div>
        <div class="details-content">
            <div class="admonition-content"><p>地图轮廓数据：</p>
<p><code>chinaprov40_db.dta</code></p>
<p><code>chinaprov40_coord.dta</code></p>
<p>线条数据：例如九段线，胡焕庸线等</p>
<p><code>chinaprov40_line_db.dta</code></p>
<p><code>chinaprov40_line_coord.dta</code></p>
<p>标签位置数据</p>
<p><code>chinaprov40_label.dta</code></p>
<p>绘画指北针和比例尺</p>
<p><code>polygon.dta</code></p>
</div>
        </div>
    </div>
<h3 id="正式绘图" class="headerLink">
    <a href="#%e6%ad%a3%e5%bc%8f%e7%bb%98%e5%9b%be" class="header-mark"></a>正式绘图</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">cd</span><span class="w"> </span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">ac</span><span class="o">/</span><span class="n">Documents</span><span class="o">/</span><span class="err">系列课程</span><span class="o">/</span><span class="err">使用</span><span class="n">Stata绘制中国省级地图</span><span class="err">（版本</span><span class="mi">4</span><span class="err">）</span><span class="o">/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">离散变量的绘制</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_db</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">encode</span><span class="w"> </span><span class="err">类型</span><span class="p">,</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="k">type</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">codebook</span><span class="w"> </span><span class="k">type</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="err">如果</span><span class="n">gramp命令没激活</span><span class="err">，输入</span><span class="n">grmap</span><span class="p">,</span><span class="w"> </span><span class="n">activate命令即可</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">grmap</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="n">ocolor</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">clmethod</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="n">clbreaks</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fcolor</span><span class="p">(</span><span class="s2">&#34;254 212 57&#34;</span><span class="w"> </span><span class="s2">&#34;253 116 70&#34;</span><span class="w"> </span><span class="s2">&#34;138 145 151&#34;</span><span class="w"> </span><span class="s2">&#34;213 228 162&#34;</span><span class="w"> </span><span class="s2">&#34;210 175 129&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">leg</span><span class="p">(</span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;不统计&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;特别行政区&#34;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;直辖市&#34;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;省&#34;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;自治区&#34;</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="s2">&#34;秦岭-淮河线&#34;</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="s2">&#34;胡焕庸线&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_line_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">pattern</span><span class="p">(</span><span class="n">solid</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">color</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">省界颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">国界线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">海岸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;24 188 156&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">秦岭淮河线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">小地图框格颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">比例尺和指北针颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;227 26 28&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">胡焕庸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">polygon</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span><span class="w"> </span><span class="n">fcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">label</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_label</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="n">cname</span><span class="p">)</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;一级标题: 2019 年中国省级行政区划&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">subti</span><span class="p">(</span><span class="s2">&#34;二级标题&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;使用 Stata 绘制中国省级地图&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gr</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">pic1</span><span class="p">.</span><span class="n">png</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">width</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">英文版本</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">grmap</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="n">ocolor</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">clmethod</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="n">clbreaks</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fcolor</span><span class="p">(</span><span class="s2">&#34;254 212 57&#34;</span><span class="w"> </span><span class="s2">&#34;253 116 70&#34;</span><span class="w"> </span><span class="s2">&#34;138 145 151&#34;</span><span class="w"> </span><span class="s2">&#34;213 228 162&#34;</span><span class="w"> </span><span class="s2">&#34;210 175 129&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">leg</span><span class="p">(</span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;Not within the scope of statistics&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;Special administrative region&#34;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;Municipality directly under&#34;</span><span class="w"> </span><span class="s2">&#34;the Central Government&#34;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;Province&#34;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;Autonomous Region&#34;</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="s2">&#34;Qinling Huaihe River Line&#34;</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="s2">&#34;Hu Huanyong line&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_line_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">pattern</span><span class="p">(</span><span class="n">solid</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">color</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">省界颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">国界线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">海岸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;24 188 156&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">秦岭淮河线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">小地图框格颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">比例尺和指北针颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;227 26 28&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">胡焕庸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">polygon</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span><span class="w"> </span><span class="n">fcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">label</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_label</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="n">ename</span><span class="p">)</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">6</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;title1: China’s provincial administrative divisions in 2019&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">subti</span><span class="p">(</span><span class="s2">&#34;title2&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;Use Stata to draw provincial maps of China&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gr</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">pic2</span><span class="p">.</span><span class="n">png</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">width</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>
<figure><a class="lightgallery" href="/img/image-20240323160005688.png" title="使用 Stata 绘制 2019 年中国省级行政区划" data-thumbnail="/img/image-20240323160005688.png" data-sub-html="<h2> </h2><p>使用 Stata 绘制 2019 年中国省级行政区划</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/image-20240323160005688.png"
            data-srcset="/img/image-20240323160005688.png, /img/image-20240323160005688.png 1.5x, /img/image-20240323160005688.png 2x"
            data-sizes="auto"
            alt="/img/image-20240323160005688.png" />
    </a><figcaption class="image-caption">使用 Stata 绘制 2019 年中国省级行政区划</figcaption>
    </figure></p>
<h3 id="其他例子" class="headerLink">
    <a href="#%e5%85%b6%e4%bb%96%e4%be%8b%e5%ad%90" class="header-mark"></a>其他例子</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">*</span><span class="w"> </span><span class="err">绘图示例：</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="p">.</span><span class="w"> </span><span class="mi">2020</span><span class="w"> </span><span class="err">年中国各省市地区生产总值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="n">delimited</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="s2">&#34;2020年中国各省市地区生产总值.csv&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> </span><span class="k">encoding</span><span class="p">(</span><span class="n">utf8</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gen</span><span class="w"> </span><span class="n">prov</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="err">省份</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="mi">2020</span><span class="err">年中国各省市地区生产总值</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_db</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gen</span><span class="w"> </span><span class="n">prov</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">substr</span><span class="p">(</span><span class="err">省</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">merge</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="n">prov</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="mi">2020</span><span class="err">年中国各省市地区生产总值</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="err">地区生产总值</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">missing</span><span class="p">(</span><span class="err">地区生产总值</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">grmap</span><span class="w"> </span><span class="err">地区生产总值</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="n">ocolor</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">clmethod</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="n">clbreaks</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">20000</span><span class="w"> </span><span class="mi">40000</span><span class="w"> </span><span class="mi">60000</span><span class="w"> </span><span class="mi">80000</span><span class="w"> </span><span class="mi">120000</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fcolor</span><span class="p">(</span><span class="n">gray</span><span class="w"> </span><span class="s2">&#34;224 242 241&#34;</span><span class="w"> </span><span class="s2">&#34;178 223 219&#34;</span><span class="w"> </span><span class="s2">&#34;128 203 196&#34;</span><span class="w"> </span><span class="s2">&#34;77 182 172&#34;</span><span class="w"> </span><span class="s2">&#34;38 166 154&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">leg</span><span class="p">(</span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;无数据&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;&lt; 2 万亿元&#34;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;2～4 万亿元&#34;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;4～6 万亿元&#34;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;6～8 万亿元&#34;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="s2">&#34;&gt; 8 万亿元&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_line_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="o">///</span><span class="w"> </span><span class="err">去除秦岭淮河线</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="err">、胡焕庸线</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">select</span><span class="p">(</span><span class="n">keep</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inlist</span><span class="p">(</span><span class="k">group</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">by</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">pattern</span><span class="p">(</span><span class="n">solid</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">实线</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">color</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">省界颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">国界线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">海岸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">小地图框格颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">比例尺和指北针颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">polygon</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span><span class="w"> </span><span class="n">fcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">label</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_label</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="n">cname</span><span class="p">)</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;2020 年中国各省市地区生产总值&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">subti</span><span class="p">(</span><span class="s2">&#34;二级标题&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;数据来源：各地统计局&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gr</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">pic3</span><span class="p">.</span><span class="n">png</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">width</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="mi">2013</span><span class="w"> </span><span class="err">年中国工企业分布及距离秦岭淮河的距离</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">转换坐标系</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">转换方式一：</span><span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">czxb</span><span class="p">.</span><span class="n">shinyapps</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">crs</span><span class="o">-</span><span class="n">trans</span><span class="o">/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">注意事项，上传的</span><span class="w"> </span><span class="n">csv</span><span class="w"> </span><span class="err">文件应该包含数值型的</span><span class="w"> </span><span class="n">lon</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="n">lat</span><span class="w"> </span><span class="err">变量，观测值上限大概是</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="err">万个，不可多人同时使用。</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">gq2013sample</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">keep</span><span class="w"> </span><span class="err">经度</span><span class="w"> </span><span class="err">纬度</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ren</span><span class="w"> </span><span class="err">经度</span><span class="w"> </span><span class="n">lon</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ren</span><span class="w"> </span><span class="err">纬度</span><span class="w"> </span><span class="n">lat</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">export</span><span class="w"> </span><span class="n">delimited</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="s2">&#34;待转换.csv&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">转换方式二：使用附件中的</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="err">脚本转换</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">处理转换后的数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">import</span><span class="w"> </span><span class="n">delimited</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="s2">&#34;转换后的数据.csv&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gen</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_n</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="err">转换后的数据</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">gq2013sample</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gen</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_n</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">merge</span><span class="w"> </span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="err">转换后的数据</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">drop</span><span class="w"> </span><span class="n">_m</span><span class="w"> </span><span class="n">id</span><span class="w"> </span><span class="o">*</span><span class="err">度</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">encode</span><span class="w"> </span><span class="err">北方或南方</span><span class="p">,</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="n">north</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="n">pointdata</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_db</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">spmap</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ocolor</span><span class="p">(</span><span class="s2">&#34;black&#34;</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_line_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="o">///</span><span class="w"> </span><span class="err">胡焕庸线（</span><span class="mi">7</span><span class="err">）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">select</span><span class="p">(</span><span class="n">keep</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inlist</span><span class="p">(</span><span class="k">group</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">by</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">pattern</span><span class="p">(</span><span class="n">solid</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">color</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">省界颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">国界线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">海岸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">秦岭淮河线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">小地图框格颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">比例尺和指北针颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">polygon</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span><span class="w"> </span><span class="n">fcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">label</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_label</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="n">cname</span><span class="p">)</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">point</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">pointdata</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="p">(</span><span class="n">north</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    	</span><span class="n">fcolor</span><span class="p">(</span><span class="s2">&#34;227 26 28%30&#34;</span><span class="w"> </span><span class="s2">&#34;24 188 156%30&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">x</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="n">proportional</span><span class="p">(</span><span class="err">与秦岭淮河线的距离</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="n">legenda</span><span class="p">(</span><span class="k">on</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">leg</span><span class="p">(</span><span class="k">order</span><span class="p">(</span><span class="mi">7</span><span class="w"> </span><span class="s2">&#34;秦岭-淮河线&#34;</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="s2">&#34;北方工企业&#34;</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="s2">&#34;南方工企业&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;2013 年中国工业企业与秦岭-淮河线的距离&#34;</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="n">black</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">subti</span><span class="p">(</span><span class="s2">&#34;二级标题&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;数据来源：2013 年中国工业企业数据库，使用高德地图地理编码接口解析经纬度&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gr</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">pic4</span><span class="p">.</span><span class="n">png</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">width</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="mi">2019</span><span class="w"> </span><span class="err">年中国各省地区生产总值</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="err">产业结构</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="err">各省历年</span><span class="n">GDP</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">drop</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="err">省份</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;中国&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="err">地区生产总值</span><span class="n">_亿元</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">地区生产总值</span><span class="n">_亿元</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">merge</span><span class="w"> </span><span class="n">m</span><span class="p">:</span><span class="n">m</span><span class="w"> </span><span class="err">省代码</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_db</span><span class="p">.</span><span class="n">dta</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="err">地区生产总值</span><span class="n">_亿元</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">missing</span><span class="p">(</span><span class="err">年份</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">grmap</span><span class="w"> </span><span class="err">地区生产总值</span><span class="n">_亿元</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="err">年份</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2019</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">missing</span><span class="p">(</span><span class="err">年份</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">clmethod</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="n">clbreaks</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="mi">120</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fcolor</span><span class="p">(</span><span class="s2">&#34;gray&#34;</span><span class="w"> </span><span class="s2">&#34;237 248 233&#34;</span><span class="w"> </span><span class="s2">&#34;199 233 192&#34;</span><span class="w"> </span><span class="s2">&#34;161 217 155&#34;</span><span class="w"> </span><span class="s2">&#34;116 196 118&#34;</span><span class="w"> </span><span class="s2">&#34;49 163 84&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ocolor</span><span class="p">(</span><span class="s2">&#34;gray&#34;</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;2019 年中国各省地区生产总值 &amp; 产业结构&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">subtitle</span><span class="p">(</span><span class="s2">&#34;数据来源：CSMAR经济金融数据库&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">legend</span><span class="p">(</span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;无数据&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;&lt; 40千亿&#34;</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;40～60千亿&#34;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;60～80千亿&#34;</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;80～100千亿&#34;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="s2">&#34;&gt; 100千亿&#34;</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="mi">14</span><span class="w"> </span><span class="s2">&#34;第一产业&#34;</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="s2">&#34;第二产业&#34;</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="s2">&#34;第三产业&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;二级标题&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_line_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="o">///</span><span class="w"> </span><span class="err">去除秦岭淮河线</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="err">胡焕庸线（</span><span class="mi">7</span><span class="err">）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">select</span><span class="p">(</span><span class="n">keep</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inlist</span><span class="p">(</span><span class="k">group</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">by</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">pattern</span><span class="p">(</span><span class="n">solid</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">color</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">省界颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">国界线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">海岸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">小地图框格颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">比例尺和指北针颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">polygon</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span><span class="w"> </span><span class="n">fcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">label</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_label</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="n">cname</span><span class="p">)</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">diagram</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">piedata</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">v</span><span class="p">(</span><span class="err">第一产业占</span><span class="n">GDP比重_百分比</span><span class="w"> </span><span class="err">第二产业占</span><span class="n">GDP比重_百分比</span><span class="w"> </span><span class="err">第三产业占</span><span class="n">GDP比重_百分比</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">type</span><span class="p">(</span><span class="n">pie</span><span class="p">)</span><span class="w"> </span><span class="n">legenda</span><span class="p">(</span><span class="k">on</span><span class="p">)</span><span class="w"> </span><span class="n">os</span><span class="p">(</span><span class="n">vvthin</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="k">size</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="n">fc</span><span class="p">(</span><span class="s2">&#34;102 194 165&#34;</span><span class="w"> </span><span class="s2">&#34;252 141 98&#34;</span><span class="w"> </span><span class="s2">&#34;229 196 148&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="n">oc</span><span class="p">(</span><span class="s2">&#34;102 194 165&#34;</span><span class="w"> </span><span class="s2">&#34;252 141 98&#34;</span><span class="w"> </span><span class="s2">&#34;229 196 148&#34;</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gr</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="s2">&#34;pic5.png&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">width</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">grmap</span><span class="w"> </span><span class="err">地区生产总值</span><span class="n">_亿元</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="err">年份</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2019</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">missing</span><span class="p">(</span><span class="err">年份</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">clmethod</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="n">clbreaks</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="mi">60</span><span class="w"> </span><span class="mi">80</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="mi">120</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fcolor</span><span class="p">(</span><span class="s2">&#34;gray&#34;</span><span class="w"> </span><span class="s2">&#34;237 248 233&#34;</span><span class="w"> </span><span class="s2">&#34;199 233 192&#34;</span><span class="w"> </span><span class="s2">&#34;161 217 155&#34;</span><span class="w"> </span><span class="s2">&#34;116 196 118&#34;</span><span class="w"> </span><span class="s2">&#34;49 163 84&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ocolor</span><span class="p">(</span><span class="s2">&#34;gray&#34;</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;2019 年中国各省地区生产总值 &amp; 第一产业比重&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">subtitle</span><span class="p">(</span><span class="s2">&#34;数据来源：CSMAR经济金融数据库&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">legend</span><span class="p">(</span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;无数据&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;&lt; 40千亿&#34;</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;40～60千亿&#34;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;60～80千亿&#34;</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;80～100千亿&#34;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="s2">&#34;&gt; 100千亿&#34;</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="mi">15</span><span class="w"> </span><span class="s2">&#34;第一产业比重&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;二级标题&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_line_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="o">///</span><span class="w"> </span><span class="err">去除秦岭淮河线</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="err">胡焕庸线（</span><span class="mi">7</span><span class="err">）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">select</span><span class="p">(</span><span class="n">keep</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inlist</span><span class="p">(</span><span class="k">group</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">by</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">pattern</span><span class="p">(</span><span class="n">solid</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">color</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">省界颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">国界线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">海岸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">小地图框格颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">比例尺和指北针颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">polygon</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span><span class="w"> </span><span class="n">fcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">diagram</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">piedata</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">v</span><span class="p">(</span><span class="err">第一产业占</span><span class="n">GDP比重_百分比</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">type</span><span class="p">(</span><span class="n">frect</span><span class="p">)</span><span class="w"> </span><span class="n">legenda</span><span class="p">(</span><span class="k">on</span><span class="p">)</span><span class="w"> </span><span class="n">os</span><span class="p">(</span><span class="n">vvthin</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="k">size</span><span class="p">(</span><span class="mi">1</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="n">fc</span><span class="p">(</span><span class="s2">&#34;252 141 98&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			</span><span class="n">oc</span><span class="p">(</span><span class="s2">&#34;252 141 98&#34;</span><span class="p">)</span><span class="w"> </span><span class="n">refsize</span><span class="p">(</span><span class="k">none</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gr</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="s2">&#34;pic6.png&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">width</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">各省人口密度</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="err">中国人口空间分布省级面板数据集</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ren</span><span class="w"> </span><span class="err">省份</span><span class="w"> </span><span class="err">省</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">merge</span><span class="w"> </span><span class="n">m</span><span class="p">:</span><span class="mi">1</span><span class="w"> </span><span class="err">省</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_db</span><span class="p">.</span><span class="n">dta</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">keep</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="err">年份</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2015</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">missing</span><span class="p">(</span><span class="err">年份</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="err">均值</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">missing</span><span class="p">(</span><span class="err">均值</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">grmap</span><span class="w"> </span><span class="err">均值</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="n">ocolor</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">clmethod</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="n">clbreaks</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="mi">100</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="mi">2000</span><span class="w"> </span><span class="mi">3000</span><span class="w"> </span><span class="mi">4000</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fcolor</span><span class="p">(</span><span class="n">gray</span><span class="w"> </span><span class="s2">&#34;224 242 241&#34;</span><span class="w"> </span><span class="s2">&#34;178 223 219&#34;</span><span class="w"> </span><span class="s2">&#34;128 203 196&#34;</span><span class="w"> </span><span class="s2">&#34;77 182 172&#34;</span><span class="w"> </span><span class="s2">&#34;38 166 154&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">leg</span><span class="p">(</span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;无数据&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;&lt; 100 人/平方公里&#34;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;100～1000 人/平方公里&#34;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;1000～2000 人/平方公里&#34;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;2000～3000 人/平方公里&#34;</span><span class="w"> </span><span class="mi">7</span><span class="w"> </span><span class="s2">&#34;&gt; 3000 人/平方公里&#34;</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="s2">&#34;胡焕庸线&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_line_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="o">///</span><span class="w"> </span><span class="err">去除秦岭淮河线</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">select</span><span class="p">(</span><span class="n">keep</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inlist</span><span class="p">(</span><span class="k">group</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">7</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="k">by</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">pattern</span><span class="p">(</span><span class="n">solid</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">color</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">省界颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">国界线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">海岸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">小地图框格颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">比例尺和指北针颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;227 26 28&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">胡焕庸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">polygon</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span><span class="w"> </span><span class="n">fcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">label</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_label</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="n">cname</span><span class="p">)</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;2015 年中国各省平均人口密度&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">subti</span><span class="p">(</span><span class="s2">&#34;二级标题&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;数据来源：中国科学院资源环境科学与数据中心&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gr</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">pic7</span><span class="p">.</span><span class="n">png</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">width</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="调节指南针和图例" class="headerLink">
    <a href="#%e8%b0%83%e8%8a%82%e6%8c%87%e5%8d%97%e9%92%88%e5%92%8c%e5%9b%be%e4%be%8b" class="header-mark"></a>调节指南针和图例</h3><p>通过识别相应数据的标识，更改坐标数实现更改效果。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span><span class="lnt">81
</span><span class="lnt">82
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="o">*</span><span class="w"> </span><span class="err">移动指北针的位置到右上方</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_line_db</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">指北针对应的</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="err">是</span><span class="w"> </span><span class="mi">40</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="mi">41</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_line_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="n">_X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_X</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3000000</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inlist</span><span class="p">(</span><span class="n">_ID</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">41</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="n">_Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4000000</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inlist</span><span class="p">(</span><span class="n">_ID</span><span class="p">,</span><span class="w"> </span><span class="mi">40</span><span class="p">,</span><span class="w"> </span><span class="mi">41</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="n">chinaprov40_line_coord2</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">polygon</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="n">_X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_X</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3000000</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">_ID</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">38</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="n">_Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4000000</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">_ID</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">38</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="n">polygon2</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_label</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">3000000</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">cname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;N&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4000000</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">cname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;N&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="n">chinaprov40_label2</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_db</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">encode</span><span class="w"> </span><span class="err">类型</span><span class="p">,</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="k">type</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">grmap</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="n">ocolor</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">clmethod</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="n">clbreaks</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fcolor</span><span class="p">(</span><span class="s2">&#34;254 212 57&#34;</span><span class="w"> </span><span class="s2">&#34;253 116 70&#34;</span><span class="w"> </span><span class="s2">&#34;138 145 151&#34;</span><span class="w"> </span><span class="s2">&#34;213 228 162&#34;</span><span class="w"> </span><span class="s2">&#34;210 175 129&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">leg</span><span class="p">(</span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;不统计&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;特别行政区&#34;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;直辖市&#34;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;省&#34;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;自治区&#34;</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="s2">&#34;秦岭-淮河线&#34;</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="s2">&#34;胡焕庸线&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_line_coord2</span><span class="p">.</span><span class="n">dta</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">pattern</span><span class="p">(</span><span class="n">solid</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">color</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">省界颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">国界线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">海岸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;24 188 156&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">秦岭淮河线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">小地图框格颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">比例尺和指北针颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;227 26 28&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">胡焕庸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">polygon</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">polygon2</span><span class="p">)</span><span class="w"> </span><span class="n">fcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">label</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_label2</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="n">cname</span><span class="p">)</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;使用 Stata 绘制 2019 年中国省级行政区划&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">subti</span><span class="p">(</span><span class="s2">&#34;二级标题&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;版本：使用 Stata 绘制中国省级地图数据包 4.0&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gr</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">pic8</span><span class="p">.</span><span class="n">png</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">width</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">调节比例尺的位置（微微上移）</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_line_db</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="o">*</span><span class="w"> </span><span class="err">比例尺对应的</span><span class="w"> </span><span class="n">ID</span><span class="w"> </span><span class="err">是</span><span class="w"> </span><span class="mi">42</span><span class="w"> </span><span class="err">和</span><span class="w"> </span><span class="mi">43</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_line_coord2</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="n">_Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">200000</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">inlist</span><span class="p">(</span><span class="n">_ID</span><span class="p">,</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="mi">43</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="n">chinaprov40_line_coord3</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">polygon2</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="n">_Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">_Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">200000</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">_ID</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">39</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="n">polygon3</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_label2</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">replace</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Y</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">200000</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">cname</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">&#34;1000km&#34;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">save</span><span class="w"> </span><span class="n">chinaprov40_label3</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">use</span><span class="w"> </span><span class="n">chinaprov40_db</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">clear</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">encode</span><span class="w"> </span><span class="err">类型</span><span class="p">,</span><span class="w"> </span><span class="n">gen</span><span class="p">(</span><span class="k">type</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">grmap</span><span class="w"> </span><span class="k">type</span><span class="w"> </span><span class="k">using</span><span class="w"> </span><span class="n">chinaprov40_coord</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">id</span><span class="p">(</span><span class="n">ID</span><span class="p">)</span><span class="w"> </span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="n">ocolor</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">clmethod</span><span class="p">(</span><span class="n">custom</span><span class="p">)</span><span class="w"> </span><span class="n">clbreaks</span><span class="p">(</span><span class="mi">0</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">fcolor</span><span class="p">(</span><span class="s2">&#34;254 212 57&#34;</span><span class="w"> </span><span class="s2">&#34;253 116 70&#34;</span><span class="w"> </span><span class="s2">&#34;138 145 151&#34;</span><span class="w"> </span><span class="s2">&#34;213 228 162&#34;</span><span class="w"> </span><span class="s2">&#34;210 175 129&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">leg</span><span class="p">(</span><span class="k">order</span><span class="p">(</span><span class="mi">2</span><span class="w"> </span><span class="s2">&#34;不统计&#34;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="s2">&#34;特别行政区&#34;</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="s2">&#34;直辖市&#34;</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="s2">&#34;省&#34;</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="s2">&#34;自治区&#34;</span><span class="w"> </span><span class="mi">11</span><span class="w"> </span><span class="s2">&#34;秦岭-淮河线&#34;</span><span class="w"> </span><span class="mi">14</span><span class="w"> </span><span class="s2">&#34;胡焕庸线&#34;</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">graphr</span><span class="p">(</span><span class="n">margin</span><span class="p">(</span><span class="n">medium</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">line</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_line_coord3</span><span class="p">.</span><span class="n">dta</span><span class="p">)</span><span class="w"> </span><span class="k">by</span><span class="p">(</span><span class="k">group</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="n">vvthin</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="mi">1</span><span class="p">.</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="n">pattern</span><span class="p">(</span><span class="n">solid</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">color</span><span class="p">(</span><span class="n">white</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">省界颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">国界线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;0 85 170&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">海岸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;24 188 156&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">秦岭淮河线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">小地图框格颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="n">black</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">比例尺和指北针颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="s2">&#34;227 26 28&#34;</span><span class="w"> </span><span class="o">///</span><span class="w"> </span><span class="err">胡焕庸线颜色</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">			  </span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">polygon</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">polygon3</span><span class="p">)</span><span class="w"> </span><span class="n">fcolor</span><span class="p">(</span><span class="n">black</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">		</span><span class="n">osize</span><span class="p">(</span><span class="n">vvthin</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">label</span><span class="p">(</span><span class="k">data</span><span class="p">(</span><span class="n">chinaprov40_label3</span><span class="p">)</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">X</span><span class="p">)</span><span class="w"> </span><span class="n">y</span><span class="p">(</span><span class="n">Y</span><span class="p">)</span><span class="w"> </span><span class="n">label</span><span class="p">(</span><span class="n">cname</span><span class="p">)</span><span class="w"> </span><span class="k">length</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">ti</span><span class="p">(</span><span class="s2">&#34;使用 Stata 绘制 2019 年中国省级行政区划&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">subti</span><span class="p">(</span><span class="s2">&#34;二级标题&#34;</span><span class="p">)</span><span class="w"> </span><span class="o">///</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">	</span><span class="n">caption</span><span class="p">(</span><span class="s2">&#34;版本：使用 Stata 绘制中国省级地图数据包 4.0&#34;</span><span class="p">,</span><span class="w"> </span><span class="k">size</span><span class="p">(</span><span class="o">*</span><span class="mi">0</span><span class="p">.</span><span class="mi">8</span><span class="p">))</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">gr</span><span class="w"> </span><span class="n">export</span><span class="w"> </span><span class="n">pic9</span><span class="p">.</span><span class="n">png</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w"> </span><span class="n">width</span><span class="p">(</span><span class="mi">1200</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h2 id="国内市级" class="headerLink">
    <a href="#%e5%9b%bd%e5%86%85%e5%b8%82%e7%ba%a7" class="header-mark"></a>国内市级</h2><p>参考<a href="https://zhuanlan.zhihu.com/p/591146315" target="_blank" rel="noopener noreffer">Stata学习：如何绘制省级市级填色地图十段线版？</a>
</p>
<p>
<figure><a class="lightgallery" href="/img/1-s2.0-S0140988322003826-gr2.jpg" title="Using machine learning to model technological heterogeneity in carbon  emission efficiency evaluation: The case of China’s cities " data-thumbnail="/img/1-s2.0-S0140988322003826-gr2.jpg" data-sub-html="<h2> </h2><p>Using machine learning to model technological heterogeneity in carbon  emission efficiency evaluation: The case of China’s cities </p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/1-s2.0-S0140988322003826-gr2.jpg"
            data-srcset="/img/1-s2.0-S0140988322003826-gr2.jpg, /img/1-s2.0-S0140988322003826-gr2.jpg 1.5x, /img/1-s2.0-S0140988322003826-gr2.jpg 2x"
            data-sizes="auto"
            alt="/img/1-s2.0-S0140988322003826-gr2.jpg" />
    </a><figcaption class="image-caption">Using machine learning to model technological heterogeneity in carbon  emission efficiency evaluation: The case of China’s cities </figcaption>
    </figure></p>
<p>扒了下论文数据源</p>
<h2 id="国内县级" class="headerLink">
    <a href="#%e5%9b%bd%e5%86%85%e5%8e%bf%e7%ba%a7" class="header-mark"></a>国内县级</h2><p>同上，略</p>
<h2 id="geoplot命令" class="headerLink">
    <a href="#geoplot%e5%91%bd%e4%bb%a4" class="header-mark"></a>geoplot命令</h2><p>和<code>spmap</code>和<code>grmap</code>相比命令更加简洁，定义功能更多，<a href="https://www.stata.com/meeting/uk23/slides/UK23_Jann.pdf" target="_blank" rel="noopener noreffer">Ben Jann (University of Bern)</a>
</p>
<p><a href="https://github.com/benjann/geoplot" target="_blank" rel="noopener noreffer">数据源</a>
</p>
<p><a href="https://medium.com/the-stata-guide/maps-in-stata-iii-geoplot-a764cf42688a" target="_blank" rel="noopener noreffer">推荐教程</a>
</p>
<h3 id="下载相关命令-1" class="headerLink">
    <a href="#%e4%b8%8b%e8%bd%bd%e7%9b%b8%e5%85%b3%e5%91%bd%e4%bb%a4-1" class="header-mark"></a>下载相关命令</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">clear</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">geoplot</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">palettes</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">colrspace</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">ssc</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">moremata</span><span class="p">,</span><span class="w"> </span><span class="k">replace</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="载入数据" class="headerLink">
    <a href="#%e8%bd%bd%e5%85%a5%e6%95%b0%e6%8d%ae" class="header-mark"></a>载入数据</h3><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">cd</span><span class="w"> </span><span class="n">F</span><span class="p">:</span><span class="err">\桌面\</span><span class="n">GIS_sum</span><span class="err">\</span><span class="n">geoplot</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="k">local</span><span class="w"> </span><span class="n">url</span><span class="w"> </span><span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">fmwww</span><span class="p">.</span><span class="n">bc</span><span class="p">.</span><span class="n">edu</span><span class="o">/</span><span class="n">repec</span><span class="o">/</span><span class="n">bocode</span><span class="o">/</span><span class="n">i</span><span class="o">/</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">geoframe</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">regions</span><span class="w">  </span><span class="o">`</span><span class="n">url</span><span class="s1">&#39;Italy-RegionsData.dta, id(id) coord(xcoord ycoord) ///
</span></span></span><span class="line"><span class="cl"><span class="s1">shpfile(Italy-RegionsCoordinates.dta)
</span></span></span><span class="line"><span class="cl"><span class="s1">geoframe create country  `url&#39;</span><span class="n">Italy</span><span class="o">-</span><span class="n">OutlineCoordinates</span><span class="p">.</span><span class="n">dta</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">geoframe</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">capitals</span><span class="w"> </span><span class="o">`</span><span class="n">url</span><span class="s1">&#39;Italy-Capitals.dta, coord(xcoord ycoord)
</span></span></span><span class="line"><span class="cl"><span class="s1">geoframe create lakes    `url&#39;</span><span class="n">Italy</span><span class="o">-</span><span class="n">Lakes</span><span class="p">.</span><span class="n">dta</span><span class="p">,</span><span class="w"> </span><span class="n">feature</span><span class="p">(</span><span class="n">water</span><span class="p">)</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="n">geoframe</span><span class="w"> </span><span class="k">create</span><span class="w"> </span><span class="n">rivers</span><span class="w">   </span><span class="o">`</span><span class="n">url</span><span class="s1">&#39;Italy-Rivers.dta, feature(water)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>含义解释：</p>
<blockquote>
<p>geoframe create 调用名字  地图标签文件和, id(独特标识) coord(经度 纬度) ///
shpfile(地图轮廓文件)</p>
<p>每一个宏定义代表一个图层。</p>
<p>通过这种宏定义，下次只用调用名字就可以画图，省时省力。</p>
</blockquote>
<h3 id="画图" class="headerLink">
    <a href="#%e7%94%bb%e5%9b%be" class="header-mark"></a>画图</h3><h4 id="基本命令" class="headerLink">
    <a href="#%e5%9f%ba%e6%9c%ac%e5%91%bd%e4%bb%a4" class="header-mark"></a>基本命令</h4><p>命令优势在于使用简单的括号就满足了图层叠加</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">geoplot (area regions fortell, label(&#34;@lb-@ub (N=@n)&#34;)) (line regions)
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<ul>
<li><code>area</code>表示这里是画区域图，使用regions宏名字的地图轮廓，绘图变量是fortell</li>
<li><code>label</code>：在地图中，这些变量将被替换为实际的数值。例如，如果某个区域的下限值为 <code>20</code>，上限值为 <code>50</code>，并且该区域包含 <code>100</code> 个单元格，则最终的标签将显示为 <code>&quot;20-50 (N=100)&quot;</code>。</li>
<li><code>@lb</code>：代表每个区域的下限值。</li>
<li><code>@ub</code>：代表每个区域的上限值。</li>
<li><code>@n</code>：代表每个区域的数量。</li>
<li><code>line</code>表示线图调用regions的线图</li>
</ul>
</blockquote>
<h4 id="气泡图" class="headerLink">
    <a href="#%e6%b0%94%e6%b3%a1%e5%9b%be" class="header-mark"></a>气泡图</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">	geoplot ///
</span></span><span class="line"><span class="cl">    (area regions) ///
</span></span><span class="line"><span class="cl">    (point capitals i.size [w=pop98], color(Set1, opacity(50)) mlcolor(%0)) ///
</span></span><span class="line"><span class="cl">    (label capitals city if pop98&gt;250000, color(black)) ///
</span></span><span class="line"><span class="cl">    , legend compass sbar(length(300) units(km))
</span></span></code></pre></td></tr></table>
</div>
</div><p>
<figure><a class="lightgallery" href="/img/image-20240324221747484.png" title="气泡图" data-thumbnail="/img/image-20240324221747484.png" data-sub-html="<h2> </h2><p>气泡图</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/image-20240324221747484.png"
            data-srcset="/img/image-20240324221747484.png, /img/image-20240324221747484.png 1.5x, /img/image-20240324221747484.png 2x"
            data-sizes="auto"
            alt="/img/image-20240324221747484.png" />
    </a><figcaption class="image-caption">气泡图</figcaption>
    </figure></p>
<ol>
<li><code>(area regions)</code>：绘制地图区域，表示地理区域的边界或范围。</li>
<li><code>(point capitals i.size [w=pop98], color(Set1, opacity(50)) mlcolor(%0))</code>：绘制城市的散点图，其中城市的大小由 <code>i.size</code> 决定，颜色使用 <code>Set1</code> 调色板，不透明度设置为 <code>50%</code>，并且城市标签的颜色为 <code>%0</code>，即黑色。城市的大小基于 <code>pop98</code> 变量，表示城市的人口数量。</li>
<li><code>(label capitals city if pop98&gt;250000, color(black))</code>：标记城市的名称，但只针对人口数量超过 <code>250,000</code> 的城市进行标记，标签颜色为黑色。</li>
<li><code>, legend compass sbar(length(300) units(km))</code>：添加图例、指南针和比例尺。比例尺的长度设置为 <code>300</code> 单位，单位为公里。</li>
</ol>
<h4 id="局部放大图" class="headerLink">
    <a href="#%e5%b1%80%e9%83%a8%e6%94%be%e5%a4%a7%e5%9b%be" class="header-mark"></a>局部放大图</h4><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-sql" data-lang="sql"><span class="line"><span class="cl"><span class="n">geoplot</span><span class="w"> </span><span class="p">(</span><span class="n">area</span><span class="w"> </span><span class="n">regions</span><span class="p">)</span><span class="w">                                           </span><span class="o">///</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">(</span><span class="n">area</span><span class="w"> </span><span class="n">regions</span><span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="n">id</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">fc</span><span class="p">(</span><span class="n">Coral</span><span class="o">*</span><span class="p">.</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="n">lc</span><span class="p">(</span><span class="n">gray</span><span class="p">))</span><span class="w">       </span><span class="o">///</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">(</span><span class="n">label</span><span class="w"> </span><span class="n">regions</span><span class="w"> </span><span class="n">region</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">id</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="p">(</span><span class="n">black</span><span class="p">))</span><span class="w">                </span><span class="o">///</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">(</span><span class="n">area</span><span class="w"> </span><span class="n">regions</span><span class="w">         </span><span class="k">if</span><span class="w"> </span><span class="n">id</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">fc</span><span class="p">(</span><span class="n">Coral</span><span class="p">)</span><span class="w"> </span><span class="n">lc</span><span class="p">(</span><span class="n">gray</span><span class="p">)</span><span class="w"> </span><span class="cm">/*
</span></span></span><span class="line"><span class="cl"><span class="cm">                                 */</span><span class="w"> </span><span class="n">box</span><span class="p">(</span><span class="n">circle</span><span class="w"> </span><span class="k">pad</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="n">fc</span><span class="p">(</span><span class="n">gs14</span><span class="p">)))</span><span class="w"> </span><span class="o">///</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">(</span><span class="n">pie</span><span class="w"> </span><span class="n">regions</span><span class="w"> </span><span class="n">relig1</span><span class="w"> </span><span class="n">relig2</span><span class="w"> </span><span class="n">relig3</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">id</span><span class="o">==</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">lab</span><span class="p">(,</span><span class="w"> </span><span class="n">reverse</span><span class="p">))</span><span class="w">  </span><span class="o">///</span><span class="w"> 
</span></span></span><span class="line"><span class="cl"><span class="w">    </span><span class="p">,</span><span class="w"> </span><span class="n">legend</span><span class="p">(</span><span class="n">pos</span><span class="p">(</span><span class="n">se</span><span class="p">)</span><span class="w"> </span><span class="n">rowgap</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span><span class="w"> </span><span class="n">zoom</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="mi">5</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="mi">90</span><span class="w"> </span><span class="mi">210</span><span class="p">)</span><span class="w">
</span></span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li><code>(area regions)</code>：绘制地图区域，表示地理区域的边界或范围。</li>
<li><code>(area regions if id==1, fc(Coral*.5) lc(gray))</code>：根据条件 <code>id==1</code> 绘制特定区域的地图区域，填充颜色为 <code>Coral*.5</code>，边界线颜色为灰色。</li>
<li><code>(label regions region if id==1, color(black))</code>：标记特定区域的名称，但只对 <code>id==1</code> 的区域进行标记，标签颜色为黑色。</li>
<li><code>(area regions if id==1, fc(Coral) lc(gray) /* ... */ box(circle pad(5) fc(gs14)))</code>：根据条件 <code>id==1</code> 绘制特定区域的地图区域，并在周围添加一个填充色为 <code>Coral</code> 的框，边界线颜色为灰色。</li>
<li><code>(pie regions relig1 relig2 relig3 if id==1, lab(, reverse))</code>：在特定区域绘制饼图，但只对 <code>id==1</code> 的区域进行绘制。饼图中包含 <code>relig1</code>、<code>relig2</code> 和 <code>relig3</code> 变量的数据，标签反向显示。</li>
<li><code>, legend(pos(se) rowgap(1))</code>：设置图例位置为东南方向，行间距为 <code>1</code>。</li>
<li><code>zoom(4/5: 6 90 210)</code>：设置地图的放大比例为 <code>4/5</code>，并指定地图显示的范围。</li>
<li>
<figure><a class="lightgallery" href="/img/image-20240324222316758.png" title="局部放大和饼图" data-thumbnail="/img/image-20240324222316758.png" data-sub-html="<h2> </h2><p>局部放大和饼图</p>">
        <img
            class="lazyload"
            src="/svg/loading.min.svg"
            data-src="/img/image-20240324222316758.png"
            data-srcset="/img/image-20240324222316758.png, /img/image-20240324222316758.png 1.5x, /img/image-20240324222316758.png 2x"
            data-sizes="auto"
            alt="/img/image-20240324222316758.png" />
    </a><figcaption class="image-caption">局部放大和饼图</figcaption>
    </figure></li>
</ul>
<h2 id="地图使用规范" class="headerLink">
    <a href="#%e5%9c%b0%e5%9b%be%e4%bd%bf%e7%94%a8%e8%a7%84%e8%8c%83" class="header-mark"></a>地图使用规范</h2><p><a href="https://www.gov.cn/gongbao/content/2023/content_5752310.htm" target="_blank" rel="noopener noreffer">自然资源部关于印发《公开地图内容表示规范》的通知</a>
</p>
<p><a href="http://politics.people.com.cn/n1/2022/0830/c1001-32514471.html" target="_blank" rel="noopener noreffer">规范使用地图 一点都不能错</a>
</p>
<p>省流：使用单个省份地图，街道乡镇地图还行，使用我国整体的地图是比较麻烦的。</p>
<ul>
<li>在使用我国整体地图时，比例画幅要求严格。</li>
<li>轮廓线，有些国界暂时未定或者每年有细微变动。</li>
<li>领土问题：香港、澳门、台湾、海南诸岛、钓鱼岛等等&hellip;</li>
<li>九段线最不能缺！</li>
<li>不能出现军工等机密数据的标注。</li>
<li>图例问题和指北针最好加上且和官方保持一致。</li>
</ul>
<p>针对期刊，最好参考：<a href="https://www.cjstp.cn/article/2021/1001-7143/1001-7143-32-6-699.shtml" target="_blank" rel="noopener noreffer">科技期刊地图插图的规范绘制和常见问题</a>
</p>
<p>最官方的地图详见：<a href="http://bzdt.ch.mnr.gov.cn/index.html" target="_blank" rel="noopener noreffer">标准地图服务</a>
。自己画好地图后也可以在这里拿去送审。</p>
<blockquote>
<p>官方是不提供shap文件的，只提供eps和jpg文件。</p>
<p>市面上流行的shap官方文件都是个人制作，需要仔细辨别。</p>
</blockquote>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2024-03-22</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://blog.huaxiangshan.com/zh-cn/posts/statagis/" data-title="Stata绘制Gis着色图" data-hashtags="Stata,Gis"><i class="fab fa-twitter fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://blog.huaxiangshan.com/zh-cn/posts/statagis/" data-hashtag="Stata"><i class="fab fa-facebook-square fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://blog.huaxiangshan.com/zh-cn/posts/statagis/" data-title="Stata绘制Gis着色图"><i class="fab fa-hacker-news fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://blog.huaxiangshan.com/zh-cn/posts/statagis/" data-title="Stata绘制Gis着色图"><i data-svg-src="/lib/simple-icons/icons/line.min.svg" aria-hidden="true"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://blog.huaxiangshan.com/zh-cn/posts/statagis/" data-title="Stata绘制Gis着色图" data-image="/img/image-20240324230945426.png"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/zh-cn/tags/stata/">Stata</a>,&nbsp;<a href="/zh-cn/tags/gis/">Gis</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/zh-cn/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/zh-cn/posts/toc/" class="prev" rel="prev" title="中文博客目录跳转失败"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>中文博客目录跳转失败</a>
            <a href="/zh-cn/posts/fs/" class="next" rel="next" title="反思：鄙视链中的经济学习心态">反思：鄙视链中的经济学习心态<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
<div id="comments"><div id="giscus"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://giscus.app/">giscus</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        <div class="footer-container">
<div class="footer-line">
	<span id="run-time"></span>
</div><div class="footer-line">
                    由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreferrer" title="Hugo 0.122.0">Hugo</a> 强力驱动&nbsp;|&nbsp;主题 - <a href="https://github.com/HEIGE-PCloud/DoIt" target="_blank" rel="noopener noreferrer" title="DoIt 0.2.10"><i class="far fa-edit fa-fw"></i> DoIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/hzp2333/hzp2333.github.io" target="_blank" rel="noopener noreferrer">滑翔闪</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
            <div class="footer-line">

<style>
    .footerImg {
        height: 20px;  
    }
</style>
<div class="footer-line custom">
<a href="https://icp.gov.moe/?keyword=20244204" target="_blank">萌ICP备20244204号</a>
<a style="text-decoration:none;color:#55bb8a;" href="https://travel.moe/go.html" title="异次元之旅-跃迁-我们一起去萌站成员的星球旅行吧！" target="_blank"><img src="https://travel.moe/images/icon/icon64green.png" style="width:24px;height:24px">异次元之旅</a>
</div>


<style>
    .footerImg {
        height: 20px;  
    }
</style>
<div class="footer-line custom">
    <a href="https://www.travellings.cn/go.html" target="_blank"><img src="https://www.travellings.cn/assets/logo.gif" class="footerImg" alt=""  title="开往-友链接力 v1.5"></a>
    <a href="https://www.foreverblog.cn/" target="_blank"><img src="https://img.foreverblog.cn/logo_en_default.png" class="footerImg" alt="" > </a>
    <a href="https://www.foreverblog.cn/go.html" target="_blank"><img src="https://img.foreverblog.cn/wormhole_2.gif" class="footerImg" alt="" title="穿梭虫洞-随机访问十年之约友链博客"></a>
</div></div>
            <div class="footer-line">
            </div>
        </div></footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/lightgallery/lightgallery.min.css"><link rel="stylesheet" href="/lib/aplayer/APlayer.min.css"><link rel="stylesheet" href="/lib/aplayer/dark.min.css"><script type="text/javascript" src="/js/giscus.min.js" defer></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/lightgallery/lightgallery.min.js"></script><script type="text/javascript" src="/lib/lightgallery/plugins/lg-thumbnail.min.js"></script><script type="text/javascript" src="/lib/lightgallery/plugins/lg-zoom.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/typeit/index.umd.js"></script><script type="text/javascript" src="/lib/mermaid/mermaid.min.js"></script><script type="text/javascript" src="/lib/aplayer/APlayer.min.js"></script><script type="text/javascript" src="/lib/meting/Meting.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"giscus":{"dataCategory":"Announcements","dataCategoryId":"DIC_kwDOLbBjxM4Cdr0n","dataEmitMetadata":"0","dataInputPosition":"bottom","dataLang":"en","dataMapping":"pathname","dataReactionsEnabled":"1","dataRepo":"hzp2333/Giscus","dataRepoId":"R_kgDOLbBjxA","dataStrict":"0"}},"data":{"id-1":"graph TD;\n\n0(获取地图文件 )==\u003e1(地图主文件.shp );\n\n0(获取地图文件 )==\u003e11(线条主文件.shp );\n\n0(获取地图文件 )==\u003e 3(表文件 .dbf);\n\n  1(地图主文件.shp )==转译==\u003e2(地图轮廓数据);\n\n11(线条主文件.shp )==转译==\u003e9(地图线条数据);\n\n  3(表文件 .dbf)==转译==\u003e4(标签文件);\n  5(数据分析文件)--\u003e6(匹配文件);\n   4(标签数据)--\u003e6(匹配文件);\n   6(匹配文件)--id标识--\u003e7(画图);\n    2(地图轮廓数据)--id标识--\u003e7(画图);\n9(地图线条数据)-.id标识.-\u003e7(画图);","id-2":"滑翔闪'S BLOG","id-3":"滑翔闪'S BLOG"},"lightgallery":true,"search":{"highlightTag":"em","lunrIndexURL":"/zh-cn/index.json","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"},"typeit":{"cursorChar":null,"cursorSpeed":null,"data":{"id-2":["id-2"],"id-3":["id-3"]},"duration":null,"speed":null}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/jquery-backstretch@2.1.18/jquery.backstretch.min.js"></script><script type="text/javascript" src="/js/custom.js"></script><script type="text/javascript">
            window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());
            gtag('config', 'G-CYZVM6VVZ8', { 'anonymize_ip': true });
        </script><script type="text/javascript" src="https://www.googletagmanager.com/gtag/js?id=G-CYZVM6VVZ8" async></script></body>
</html>
